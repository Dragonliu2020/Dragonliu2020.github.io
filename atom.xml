<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Dragon Liu</title>
  
  
  <link href="https://dragonliu2018.github.io/atom.xml" rel="self"/>
  
  <link href="https://dragonliu2018.github.io/"/>
  <updated>2022-03-26T14:59:24.114Z</updated>
  <id>https://dragonliu2018.github.io/</id>
  
  <author>
    <name>Dragon Liu</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>【开源代码学习--若依】恶意样本界面空白</title>
    <link href="https://dragonliu2018.github.io/2022/03/26/%E3%80%90%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0--%E8%8B%A5%E4%BE%9D%E3%80%91%E6%81%B6%E6%84%8F%E6%A0%B7%E6%9C%AC%E7%95%8C%E9%9D%A2%E7%A9%BA%E7%99%BD/"/>
    <id>https://dragonliu2018.github.io/2022/03/26/%E3%80%90%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0--%E8%8B%A5%E4%BE%9D%E3%80%91%E6%81%B6%E6%84%8F%E6%A0%B7%E6%9C%AC%E7%95%8C%E9%9D%A2%E7%A9%BA%E7%99%BD/</id>
    <published>2022-03-26T14:52:51.000Z</published>
    <updated>2022-03-26T14:59:24.114Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-问题"><a class="markdownIt-Anchor" href="#1-问题"></a> 1 问题</h1><p>恶意样本界面空白，没有数据；恶意家族界面正常。</p><img src="https://s2.loli.net/2022/03/26/jS3IDeH8hlpN2at.png" width="800" height="300" alt="图片名称" align="center" id="125"><img src="https://s2.loli.net/2022/03/26/g3sXzGJT52E8Zdo.png" width="800" height="300" alt="图片名称" align="center" id="126"><h1 id="2-解决"><a class="markdownIt-Anchor" href="#2-解决"></a> 2 解决</h1><p>测试后端正常，数据也传到了前端。</p><p>最后排错，确定bug代码块：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 动态分析-》图对话框 --&gt;</span><br><span class="line">&lt;el-dialog :title=&quot;title&quot; :visible.sync=&quot;open_dynamic_graph&quot; width=&quot;1100px&quot; append-to-body&gt;</span><br><span class="line">    &lt;el-image  :src=&quot;require(&apos;@/assets/graphviz_images/&apos;+this.img_path)&quot; :fit=&quot;cover&quot;&gt;&lt;/el-image&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></table></figure><p><strong>原因</strong>：<code>@/assets/graphviz_images/'+this.img_path</code> 文件不存在。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="开发" scheme="https://Dragonliu2018.github.io/categories/开发/"/>
    
    
    <category term="若依" scheme="https://Dragonliu2018.github.io/tags/若依/"/>
    
  </entry>
  
  <entry>
    <title>【开源代码学习--若依】vue+springboot文件下载</title>
    <link href="https://dragonliu2018.github.io/2022/03/26/%E3%80%90%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0--%E8%8B%A5%E4%BE%9D%E3%80%91vue-springboot%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/"/>
    <id>https://dragonliu2018.github.io/2022/03/26/%E3%80%90%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0--%E8%8B%A5%E4%BE%9D%E3%80%91vue-springboot%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/</id>
    <published>2022-03-26T13:57:18.000Z</published>
    <updated>2022-03-26T14:52:24.527Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-引入"><a class="markdownIt-Anchor" href="#1-引入"></a> 1 引入</h1><p>需要文件下载功能，如下图所示：</p><img src="https://s2.loli.net/2022/03/26/MiuO3xawsctC8Vg.png" width="900" height="300" alt="图片名称" align="center" id="124"><h1 id="2-解决"><a class="markdownIt-Anchor" href="#2-解决"></a> 2 解决</h1><h2 id="21-手写404无法下载"><a class="markdownIt-Anchor" href="#21-手写404无法下载"></a> 2.1 手写(404，无法下载)</h2><ul><li><p><a href="http://doc.ruoyi.vip/ruoyi/document/htsc.html#%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD" target="_blank" rel="noopener">若依手册——上传下载</a></p></li><li><p><a href="https://cloud.tencent.com/developer/article/1790636" target="_blank" rel="noopener">Java中将Map转String，String转Map</a></p></li><li><p><a href="https://www.cnblogs.com/javalinux/p/14807391.html" target="_blank" rel="noopener">vue+springboot文件下载</a></p></li><li><p><a href="https://www.freesion.com/article/77181445797/" target="_blank" rel="noopener">使用VUE和SPRING BOOT实现文件下载</a></p></li></ul><h2 id="22-使用官网提供的封装方法"><a class="markdownIt-Anchor" href="#22-使用官网提供的封装方法"></a> 2.2 使用官网提供的封装方法</h2><p><strong>参考</strong>：<a href="https://blog.51cto.com/YangRoc/5057161" target="_blank" rel="noopener">使用若依前后端分离下载需要授权的url文件 </a></p><ol><li><p>前端使用封装方法<code>this.$download.resource(resource);</code>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// 表格中的下载按钮</span><br><span class="line">&lt;el-table-column label=&quot;下载报告&quot; align=&quot;center&quot; class-name=&quot;small-padding fixed-width&quot;&gt;</span><br><span class="line">    &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">&lt;el-button</span><br><span class="line">           size=&quot;mini&quot;</span><br><span class="line">           type=&quot;text&quot;</span><br><span class="line">           icon=&quot;el-icon-download&quot;</span><br><span class="line">           @click=&quot;handleDownload(scope.row)&quot;</span><br><span class="line">           v-hasPermi=&quot;[&apos;system:report:downLoad:test&apos;]&quot;</span><br><span class="line">           &gt;下载&lt;/el-button&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">// handleDownload(scope.row)函数实现</span><br><span class="line">/** 下载报告按钮操作 */</span><br><span class="line">handleDownload(row) &#123;</span><br><span class="line">    this.reset();</span><br><span class="line">    const id = row.id || this.ids</span><br><span class="line">    const resource = &quot;/profile/upload/&quot; + row.reportName;  // 不再设立实体类</span><br><span class="line">    // 默认方法</span><br><span class="line">    this.$download.resource(resource);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li><li><p>增加对xml文件的授权：修改<code>MimeTypeUtils.java</code>文件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String[] DEFAULT_ALLOWED_EXTENSION = &#123;</span><br><span class="line">    <span class="comment">// 图片</span></span><br><span class="line">    <span class="string">"bmp"</span>, <span class="string">"gif"</span>, <span class="string">"jpg"</span>, <span class="string">"jpeg"</span>, <span class="string">"png"</span>,</span><br><span class="line">    <span class="comment">// word excel powerpoint</span></span><br><span class="line">    <span class="string">"doc"</span>, <span class="string">"docx"</span>, <span class="string">"xls"</span>, <span class="string">"xlsx"</span>, <span class="string">"ppt"</span>, <span class="string">"pptx"</span>, <span class="string">"html"</span>, <span class="string">"htm"</span>, <span class="string">"txt"</span>,</span><br><span class="line">    <span class="comment">// 压缩文件</span></span><br><span class="line">    <span class="string">"rar"</span>, <span class="string">"zip"</span>, <span class="string">"gz"</span>, <span class="string">"bz2"</span>,</span><br><span class="line">    <span class="comment">// 视频格式</span></span><br><span class="line">    <span class="string">"mp4"</span>, <span class="string">"avi"</span>, <span class="string">"rmvb"</span>,</span><br><span class="line">    <span class="comment">// pdf</span></span><br><span class="line">    <span class="string">"pdf"</span>,</span><br><span class="line">    <span class="comment">// xml</span></span><br><span class="line">    <span class="string">"xml"</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>修改资源默认路径，资源默认路径是<code>D:\ruoyi\uploadPath\upload</code>，修改文件<code>RuoYi-Vue\ruoyi-admin\src\main\resources\application.yml</code></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 项目相关配置</span></span><br><span class="line"><span class="attr">ruoyi:</span></span><br><span class="line">  <span class="comment"># 名称</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">RuoYi</span></span><br><span class="line">  <span class="comment"># 版本</span></span><br><span class="line">  <span class="attr">version:</span> <span class="number">3.8</span><span class="number">.1</span></span><br><span class="line">  <span class="comment"># 版权年份</span></span><br><span class="line">  <span class="attr">copyrightYear:</span> <span class="number">2022</span></span><br><span class="line">  <span class="comment"># 实例演示开关</span></span><br><span class="line">  <span class="attr">demoEnabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># 文件路径 示例（ Windows配置D:/ruoyi/uploadPath，Linux配置 /home/ruoyi/uploadPath）</span></span><br><span class="line">  <span class="attr">profile:</span> <span class="string">E:/05</span> <span class="string">Code/RMDVS/uploadPath</span></span><br><span class="line">  <span class="comment"># 获取ip地址开关</span></span><br><span class="line">  <span class="attr">addressEnabled:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># 验证码类型 math 数组计算 char 字符验证</span></span><br><span class="line">  <span class="attr">captchaType:</span> <span class="string">math</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="23-补充修改日志默认路径"><a class="markdownIt-Anchor" href="#23-补充修改日志默认路径"></a> 2.3 补充(修改日志默认路径)</h2><p>日志默认路径：<code>E:\home\ruoyi\logs</code></p><p>修改文件：<code>RuoYi-Vue\ruoyi-admin\src\main\resources\logback.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 日志存放路径 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;property name="log.path" value="/home/ruoyi/logs" /&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"log.path"</span> <span class="attr">value</span>=<span class="string">"E:/05 Code/RMDVS/logs"</span> /&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="开发" scheme="https://Dragonliu2018.github.io/categories/开发/"/>
    
    
    <category term="若依" scheme="https://Dragonliu2018.github.io/tags/若依/"/>
    
    <category term="Vue" scheme="https://Dragonliu2018.github.io/tags/Vue/"/>
    
    <category term="Java" scheme="https://Dragonliu2018.github.io/tags/Java/"/>
    
    <category term="Spring Boot" scheme="https://Dragonliu2018.github.io/tags/Spring-Boot/"/>
    
  </entry>
  
  <entry>
    <title>【开源代码学习--若依】表格同列排序</title>
    <link href="https://dragonliu2018.github.io/2022/03/26/%E3%80%90%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0--%E8%8B%A5%E4%BE%9D%E3%80%91%E8%A1%A8%E6%A0%BC%E5%90%8C%E5%88%97%E6%8E%92%E5%BA%8F/"/>
    <id>https://dragonliu2018.github.io/2022/03/26/%E3%80%90%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0--%E8%8B%A5%E4%BE%9D%E3%80%91%E8%A1%A8%E6%A0%BC%E5%90%8C%E5%88%97%E6%8E%92%E5%BA%8F/</id>
    <published>2022-03-26T13:39:06.000Z</published>
    <updated>2022-03-26T14:04:18.695Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-引入"><a class="markdownIt-Anchor" href="#1-引入"></a> 1 引入</h1><p>在表格中，需要根据同一列中的内容进行排序。如下图所示：</p><img src="https://s2.loli.net/2022/03/26/gDWL1YdseFHj7MQ.png" width="900" height="300" alt="图片名称" align="center" id="123"><h1 id="2-解决"><a class="markdownIt-Anchor" href="#2-解决"></a> 2 解决</h1><p>table标签：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table v-loading=&quot;loading&quot; :data=&quot;familyList&quot; @selection-change=&quot;handleSelectionChange&quot; :default-sort=&quot;defaultSort&quot; @sort-change=&quot;handleSortChange&quot;&gt;</span><br></pre></td></tr></table></figure><p>table-column标签：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column label=&quot;家族中样本平均得分&quot; align=&quot;center&quot; prop=&quot;averageScore&quot; sortable=&quot;custom&quot; :sort-orders=&quot;[&apos;descending&apos;, &apos;ascending&apos;]&quot; /&gt;</span><br></pre></td></tr></table></figure><p>涉及参数及函数：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 默认排序</span></span><br><span class="line">defaultSort: &#123;<span class="attr">prop</span>: <span class="string">'id'</span>, <span class="attr">order</span>: <span class="string">'ascending'</span>&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">/** 排序触发事件 */</span></span><br><span class="line">handleSortChange(column, prop, order) &#123;</span><br><span class="line">  <span class="keyword">this</span>.queryParams.orderByColumn = column.prop;</span><br><span class="line">  <span class="keyword">this</span>.queryParams.isAsc = column.order;</span><br><span class="line">  <span class="keyword">this</span>.getList();</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="开发" scheme="https://Dragonliu2018.github.io/categories/开发/"/>
    
    
    <category term="Element" scheme="https://Dragonliu2018.github.io/tags/Element/"/>
    
    <category term="若依" scheme="https://Dragonliu2018.github.io/tags/若依/"/>
    
  </entry>
  
  <entry>
    <title>【开源代码学习--若依】表格中跳转外部链接</title>
    <link href="https://dragonliu2018.github.io/2022/03/26/%E3%80%90%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0--%E8%8B%A5%E4%BE%9D%E3%80%91%E8%A1%A8%E6%A0%BC%E4%B8%AD%E8%B7%B3%E8%BD%AC%E5%A4%96%E9%83%A8%E9%93%BE%E6%8E%A5/"/>
    <id>https://dragonliu2018.github.io/2022/03/26/%E3%80%90%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0--%E8%8B%A5%E4%BE%9D%E3%80%91%E8%A1%A8%E6%A0%BC%E4%B8%AD%E8%B7%B3%E8%BD%AC%E5%A4%96%E9%83%A8%E9%93%BE%E6%8E%A5/</id>
    <published>2022-03-26T13:22:14.000Z</published>
    <updated>2022-03-26T13:34:58.309Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-引入"><a class="markdownIt-Anchor" href="#1-引入"></a> 1 引入</h1><p>现在的需求：表格中需要加入跳转外部链接，链接是后端传入。</p><h1 id="2-解决"><a class="markdownIt-Anchor" href="#2-解决"></a> 2 解决</h1><p><strong>参考</strong>：<a href="https://blog.csdn.net/caimaomaocai/article/details/81334641" target="_blank" rel="noopener">在elementui中的table加入可跳转的链接</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column label=&quot;VirusTotal链接&quot; align=&quot;center&quot;&gt;</span><br><span class="line">    &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">&lt;a :href=&quot;scope.row.permalink&quot;</span><br><span class="line">   target=&quot;_blank&quot;</span><br><span class="line">   class=&quot;buttonText&quot;</span><br><span class="line">   style=&quot;color: dodgerblue&quot;&gt;跳 转&lt;/a&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure><p><strong>解释</strong>：</p><ol><li><code>scope.row.permalink</code>：表示表格当前行的<code>permalink</code>属性或参数</li><li><code>style=&quot;color: dodgerblue&quot;</code>：设置字体颜色，<a href="http://xh.5156edu.com/page/z1015m9220j18754.html" target="_blank" rel="noopener">颜色表链接</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="开发" scheme="https://Dragonliu2018.github.io/categories/开发/"/>
    
    
    <category term="Element" scheme="https://Dragonliu2018.github.io/tags/Element/"/>
    
    <category term="若依" scheme="https://Dragonliu2018.github.io/tags/若依/"/>
    
  </entry>
  
  <entry>
    <title>【开源代码学习--若依】表格设置列宽</title>
    <link href="https://dragonliu2018.github.io/2022/03/26/%E3%80%90%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0--%E8%8B%A5%E4%BE%9D%E3%80%91%E8%A1%A8%E6%A0%BC%E8%AE%BE%E7%BD%AE%E5%88%97%E5%AE%BD/"/>
    <id>https://dragonliu2018.github.io/2022/03/26/%E3%80%90%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0--%E8%8B%A5%E4%BE%9D%E3%80%91%E8%A1%A8%E6%A0%BC%E8%AE%BE%E7%BD%AE%E5%88%97%E5%AE%BD/</id>
    <published>2022-03-26T13:05:58.000Z</published>
    <updated>2022-03-26T13:20:05.942Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-引入"><a class="markdownIt-Anchor" href="#1-引入"></a> 1 引入</h1><p><a href="https://element.eleme.cn/#/zh-CN/component/table" target="_blank" rel="noopener">官方文档——表格</a></p><p>表格中每列的文字长度不同，有些差距较大，所以需要修改表格的某一列宽度。</p><h1 id="2-解决"><a class="markdownIt-Anchor" href="#2-解决"></a> 2 解决</h1><h2 id="21宽度自适应效果不好"><a class="markdownIt-Anchor" href="#21宽度自适应效果不好"></a> 2.1宽度自适应（效果不好）</h2><p><a href="https://cloud.tencent.com/developer/article/1821511" target="_blank" rel="noopener">ElementUI 实现el-table 列宽自适应</a></p><h2 id="22-设置width属性"><a class="markdownIt-Anchor" href="#22-设置width属性"></a> 2.2 设置width属性</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column label=&quot;危害得分&quot; align=&quot;center&quot; prop=&quot;hazardScore&quot; width=&quot;140px&quot;/&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="开发" scheme="https://Dragonliu2018.github.io/categories/开发/"/>
    
    
    <category term="Element" scheme="https://Dragonliu2018.github.io/tags/Element/"/>
    
    <category term="若依" scheme="https://Dragonliu2018.github.io/tags/若依/"/>
    
  </entry>
  
  <entry>
    <title>【开源代码学习--若依】表格分页问题</title>
    <link href="https://dragonliu2018.github.io/2022/03/26/%E3%80%90%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0--%E8%8B%A5%E4%BE%9D%E3%80%91%E8%A1%A8%E6%A0%BC%E5%88%86%E9%A1%B5%E9%97%AE%E9%A2%98/"/>
    <id>https://dragonliu2018.github.io/2022/03/26/%E3%80%90%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0--%E8%8B%A5%E4%BE%9D%E3%80%91%E8%A1%A8%E6%A0%BC%E5%88%86%E9%A1%B5%E9%97%AE%E9%A2%98/</id>
    <published>2022-03-26T12:01:43.000Z</published>
    <updated>2022-03-26T13:02:21.974Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-问题引入"><a class="markdownIt-Anchor" href="#1-问题引入"></a> 1 问题引入</h1><p><a href="https://cn.vuejs.org/" target="_blank" rel="noopener">Vue官方文档</a></p><p>表格实现了分页，但是点击页码后会将所有数据显示或不刷新页面，观察后台，并没有调用操作。</p><p><strong>原因</strong>：回调函数出了问题，没有正确传参。</p><h1 id="2-分页实现"><a class="markdownIt-Anchor" href="#2-分页实现"></a> 2 分页实现</h1><p><strong>参考</strong>：<a href="https://blog.csdn.net/BADAO_LIUMANG_QIZHI/article/details/108017635" target="_blank" rel="noopener">若依管理系统源码分析-分页的实现以及post请求时的分页</a></p><h2 id="21-前端调用"><a class="markdownIt-Anchor" href="#21-前端调用"></a> 2.1 前端调用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// 一般在查询参数中定义分页变量</span><br><span class="line">queryParams: &#123;</span><br><span class="line">  pageNum: 1,</span><br><span class="line">  pageSize: 10</span><br><span class="line">&#125;,</span><br><span class="line"> </span><br><span class="line">// 页面添加分页组件，传入分页变量</span><br><span class="line">&lt;pagination</span><br><span class="line">  v-show=&quot;total&gt;0&quot;</span><br><span class="line">  :total=&quot;total&quot;</span><br><span class="line">  :page.sync=&quot;queryParams.pageNum&quot;</span><br><span class="line">  :limit.sync=&quot;queryParams.pageSize&quot;</span><br><span class="line">  @pagination=&quot;getList&quot;</span><br><span class="line">/&gt;</span><br><span class="line"> </span><br><span class="line">// 调用后台方法，传入参数 获取结果</span><br><span class="line">listUser(this.queryParams).then(response =&gt; &#123;</span><br><span class="line">    this.userList = response.rows;</span><br><span class="line">    this.total = response.total;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="22-后台逻辑实现"><a class="markdownIt-Anchor" href="#22-后台逻辑实现"></a> 2.2 后台逻辑实现</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/list"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> TableDataInfo <span class="title">list</span><span class="params">(User user)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    startPage();  <span class="comment">// 此方法配合前端完成自动分页</span></span><br><span class="line">    List&lt;User&gt; list = userService.selectUserList(user);</span><br><span class="line">    <span class="keyword">return</span> getDataTable(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="3-解决"><a class="markdownIt-Anchor" href="#3-解决"></a> 3 解决</h1><p>回调函数进行参数传递：<code>@pagination=&quot;handleDynamic(dynamicRow)</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table v-loading=&quot;dynamicLoading&quot; :data=&quot;dynamicList&quot; @selection-change=&quot;handleSelectionChange&quot; v-fit-columns&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;行为类别&quot; align=&quot;center&quot; prop=&quot;category&quot; width=&quot;140px&quot;/&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;危害等级&quot; align=&quot;center&quot; prop=&quot;hazardLevel&quot; width=&quot;140px&quot;/&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;危害得分&quot; align=&quot;center&quot; prop=&quot;hazardScore&quot; width=&quot;140px&quot;/&gt;</span><br><span class="line">    &lt;el-table-column label=&quot;类目行为代表&quot; align=&quot;center&quot; prop=&quot;represent&quot; /&gt;</span><br><span class="line">&lt;/el-table&gt;</span><br><span class="line">&lt;pagination</span><br><span class="line">            v-show=&quot;dynamicTotal&gt;0&quot;</span><br><span class="line">            :total=&quot;dynamicTotal&quot;</span><br><span class="line">            :page.sync=&quot;queryDynamicParams.pageNum&quot;</span><br><span class="line">            :limit.sync=&quot;queryDynamicParams.pageSize&quot;</span><br><span class="line">            @pagination=&quot;handleDynamic(dynamicRow)&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure><p>其中：<code>v-loading</code> 作用为加载动画。</p><h1 id="4-其他问题未解决"><a class="markdownIt-Anchor" href="#4-其他问题未解决"></a> 4 其他问题(未解决)</h1><p>正常情况下，表格页面展示会默认从第一页开始。但是实践过程中会从上次表格页数展示，即使是不同的表格。</p><h1 id="x-参考"><a class="markdownIt-Anchor" href="#x-参考"></a> X 参考</h1><ul><li><a href="https://element.eleme.cn/#/zh-CN/component/table" target="_blank" rel="noopener">官方文档——表格</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="开发" scheme="https://Dragonliu2018.github.io/categories/开发/"/>
    
    
    <category term="Element" scheme="https://Dragonliu2018.github.io/tags/Element/"/>
    
    <category term="若依" scheme="https://Dragonliu2018.github.io/tags/若依/"/>
    
  </entry>
  
  <entry>
    <title>【开源代码学习--若依】Element显示图片</title>
    <link href="https://dragonliu2018.github.io/2022/03/26/%E3%80%90%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0--%E8%8B%A5%E4%BE%9D%E3%80%91Element%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87/"/>
    <id>https://dragonliu2018.github.io/2022/03/26/%E3%80%90%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0--%E8%8B%A5%E4%BE%9D%E3%80%91Element%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87/</id>
    <published>2022-03-26T11:47:40.000Z</published>
    <updated>2022-03-26T11:59:13.363Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-引用项目内部的图片"><a class="markdownIt-Anchor" href="#1-引用项目内部的图片"></a> 1 引用项目内部的图片</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-image  :src=&quot;require(&apos;@/assets/graphviz_images/&apos;+this.img_path)&quot; :fit=&quot;cover&quot;&gt;&lt;/el-image&gt;</span><br></pre></td></tr></table></figure><h1 id="2-参考"><a class="markdownIt-Anchor" href="#2-参考"></a> 2 参考</h1><ul><li><a href="https://element.eleme.cn/#/zh-CN/component/image" target="_blank" rel="noopener">官方文档——Image 图片</a></li><li><a href="https://blog.csdn.net/yssa1125001/article/details/106203695" target="_blank" rel="noopener">element ui 或者 element-admin 模板 img 标签 图片不能正常显示或者资源不能正常加载问题</a></li><li><a href="https://blog.csdn.net/qq_27702739/article/details/121213503" target="_blank" rel="noopener">element-ui Image组件中的隐藏功能el-image-viewer组件的使用</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="开发" scheme="https://Dragonliu2018.github.io/categories/开发/"/>
    
    
    <category term="Element" scheme="https://Dragonliu2018.github.io/tags/Element/"/>
    
    <category term="若依" scheme="https://Dragonliu2018.github.io/tags/若依/"/>
    
  </entry>
  
  <entry>
    <title>【开源代码学习--若依】Element中的Icon图标</title>
    <link href="https://dragonliu2018.github.io/2022/03/26/%E3%80%90%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0--%E8%8B%A5%E4%BE%9D%E3%80%91Element%E4%B8%AD%E7%9A%84Icon%E5%9B%BE%E6%A0%87/"/>
    <id>https://dragonliu2018.github.io/2022/03/26/%E3%80%90%E5%BC%80%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0--%E8%8B%A5%E4%BE%9D%E3%80%91Element%E4%B8%AD%E7%9A%84Icon%E5%9B%BE%E6%A0%87/</id>
    <published>2022-03-26T11:20:46.000Z</published>
    <updated>2022-03-26T11:36:18.715Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-element简介"><a class="markdownIt-Anchor" href="#1-element简介"></a> 1 Element简介</h1><p>Element，一套为开发者、设计师和产品经理准备的基于 Vue 2.0 的桌面端组件库。</p><p><a href="https://element.eleme.cn/#/zh-CN" target="_blank" rel="noopener">官方文档</a></p><h1 id="2-icon-图标"><a class="markdownIt-Anchor" href="#2-icon-图标"></a> 2 Icon 图标</h1><p>Icon 图标提供了一套常用的图标集合。</p><p>直接通过设置类名为 el-icon-iconName 来使用即可。例如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;i class=&quot;el-icon-edit&quot;&gt;&lt;/i&gt;</span><br><span class="line">&lt;i class=&quot;el-icon-share&quot;&gt;&lt;/i&gt;</span><br><span class="line">&lt;i class=&quot;el-icon-delete&quot;&gt;&lt;/i&gt;</span><br><span class="line">&lt;el-button type=&quot;primary&quot; icon=&quot;el-icon-search&quot;&gt;搜索&lt;/el-button&gt;</span><br></pre></td></tr></table></figure><p><a href="https://element.eleme.cn/#/zh-CN/component/icon" target="_blank" rel="noopener">官方文档——Icon 图标</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="开发" scheme="https://Dragonliu2018.github.io/categories/开发/"/>
    
    
    <category term="Element" scheme="https://Dragonliu2018.github.io/tags/Element/"/>
    
    <category term="若依" scheme="https://Dragonliu2018.github.io/tags/若依/"/>
    
  </entry>
  
  <entry>
    <title>sqlalchemy中的聚合函数</title>
    <link href="https://dragonliu2018.github.io/2022/03/26/sqlalchemy%E4%B8%AD%E7%9A%84%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0/"/>
    <id>https://dragonliu2018.github.io/2022/03/26/sqlalchemy%E4%B8%AD%E7%9A%84%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0/</id>
    <published>2022-03-26T04:10:12.000Z</published>
    <updated>2022-03-26T05:41:03.350Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-引入"><a class="markdownIt-Anchor" href="#1-引入"></a> 1 引入</h1><p><strong>参考</strong>：<a href="https://www.yiibai.com/sql/sql-aggregate-functions.html" target="_blank" rel="noopener">SQL聚合函数</a></p><p>SQL聚合函数，包括：<code>AVG()</code>，<code>COUNT()</code>，<code>MIN()</code>，<code>MAX()</code>和<code>SUM()</code>。</p><p>SQL聚合函数计算一组值并返回单个值。 例如，平均函数(AVG)采用值列表并返回平均值。</p><h1 id="2-实验"><a class="markdownIt-Anchor" href="#2-实验"></a> 2 实验</h1><h2 id="21-构建数据表"><a class="markdownIt-Anchor" href="#21-构建数据表"></a> 2.1 构建数据表</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> declarative_base</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine, Column, Integer, String</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker</span><br><span class="line"></span><br><span class="line">HOST = <span class="string">'127.0.0.1'</span></span><br><span class="line">PORT = <span class="number">3306</span></span><br><span class="line">USERNAME = <span class="string">'xxx'</span>  <span class="comment"># mysql用户名</span></span><br><span class="line">PASSWORD = <span class="string">'xxx'</span>  <span class="comment"># mysql密码</span></span><br><span class="line">DB = <span class="string">'xxx'</span>  <span class="comment"># 数据库名称</span></span><br><span class="line"><span class="comment"># f代表可以使用&#123;&#125;引用变量</span></span><br><span class="line">DB_URI = <span class="string">f'mysql+pymysql://<span class="subst">&#123;USERNAME&#125;</span>:<span class="subst">&#123;PASSWORD&#125;</span>@<span class="subst">&#123;HOST&#125;</span>:<span class="subst">&#123;PORT&#125;</span>/<span class="subst">&#123;DB&#125;</span>'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建引擎</span></span><br><span class="line">engine = create_engine(DB_URI)</span><br><span class="line"><span class="comment"># 创建SQLORM基类，注意这里要加参数，参数为上一步创建的引擎</span></span><br><span class="line">Base = declarative_base(engine)</span><br><span class="line"><span class="comment"># 构建session对象</span></span><br><span class="line">session = sessionmaker(engine)()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建实体表Person</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">(Base)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">'person'</span>  <span class="comment"># 表名</span></span><br><span class="line">    id = Column(Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    name = Column(String(<span class="number">100</span>))</span><br><span class="line">    age = Column(Integer)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将模型映射到数据库中</span></span><br><span class="line"><span class="comment"># 即如果数据库中没有student表则创建映射表student</span></span><br><span class="line">Base.metadata.create_all()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 增：批量</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert_batch</span><span class="params">(obj_list)</span>:</span></span><br><span class="line">    session.add_all(obj_list)</span><br><span class="line">    session.commit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除TestTable表</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">del_table</span><span class="params">()</span>:</span></span><br><span class="line">    Person.__table__.drop()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    obj_list = [Person(name=<span class="string">"dragon"</span>, age=<span class="number">22</span>),</span><br><span class="line">                Person(name=<span class="string">"pig"</span>, age=<span class="number">23</span>),</span><br><span class="line">                Person(name=<span class="string">"SY"</span>, age=<span class="number">19</span>),</span><br><span class="line">                Person(name=<span class="string">"cat"</span>, age=<span class="number">7</span>),</span><br><span class="line">                Person(name=<span class="string">"toy"</span>, age=<span class="number">8</span>),</span><br><span class="line">                Person(name=<span class="string">"sen"</span>, age=<span class="number">23</span>),</span><br><span class="line">                Person(name=<span class="string">"tor"</span>, age=<span class="number">10</span>),</span><br><span class="line">                ]</span><br><span class="line">    insert_batch(obj_list)</span><br><span class="line">    <span class="comment"># del_table()</span></span><br></pre></td></tr></table></figure><p>数据表如下图所示：</p><img src="https://s2.loli.net/2022/03/26/h8yAv2Ts1OfipVX.png" width="800" height="200" alt="图片名称" align="center" id="120"><p><strong>下面的聚合函数，需要导入<code>func</code>：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> func</span><br></pre></td></tr></table></figure><h2 id="22-avg-返回集合中的平均值"><a class="markdownIt-Anchor" href="#22-avg-返回集合中的平均值"></a> 2.2 AVG() - 返回集合中的平均值</h2><p><strong>参考</strong>：<a href="https://blog.51cto.com/u_15127597/3800261" target="_blank" rel="noopener">SQLAlchemy（二)：SQLAlchemy对数据的增删改查操作、属性常用数据类型详解</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">age_avg = session.query(func.avg(Person.age)).scalar()  <span class="comment"># 16.0000</span></span><br></pre></td></tr></table></figure><p><strong>注意</strong>：这里的<code>age</code>虽然是int类型的，但是最后的平均值是“准确”的小数。</p><h2 id="23-count-返回集合中的项目数"><a class="markdownIt-Anchor" href="#23-count-返回集合中的项目数"></a> 2.3 COUNT() - 返回集合中的项目数</h2><p><strong>参考</strong>：<a href="https://www.jianshu.com/p/b03e20cde341" target="_blank" rel="noopener">SQLAlchemy —— query</a></p><p>返回查询结果的对象的数目，下面的例子是找到了<code>toy</code>和<code>tor</code>两个对象：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">u = session.query(Person).filter(Person.name.like(<span class="string">'to%'</span>)).count()  <span class="comment"># 2</span></span><br></pre></td></tr></table></figure><p>需要单独计算某一类对象的数量，可以用 <code>func()</code> 和 <code>group_by()</code> 配合查询：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">u = session.query(Person.name, func.count(Person.name)).group_by(Person.name).all()</span><br><span class="line">print(u)  <span class="comment"># [('dragon', 1), ('pig', 1), ('SY', 1), ('cat', 1), ('toy', 1), ('sen', 1), ('tor', 1)]</span></span><br></pre></td></tr></table></figure><p>返回查询得到的的数值，我们使用 <code>scalar()</code> 方法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">u = session.query(func.count(Person.age)).scalar()  <span class="comment"># 7</span></span><br></pre></td></tr></table></figure><h2 id="24-min-返回集合的最小值"><a class="markdownIt-Anchor" href="#24-min-返回集合的最小值"></a> 2.4 MIN() - 返回集合的最小值</h2><p><strong>参考</strong>：<a href="https://blog.51cto.com/u_15127597/3800261" target="_blank" rel="noopener">SQLAlchemy（二)：SQLAlchemy对数据的增删改查操作、属性常用数据类型详解</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">age_min = session.query(func.min(Person.age)).scalar()  <span class="comment"># 7</span></span><br></pre></td></tr></table></figure><h2 id="25-max-返回集合的最大值"><a class="markdownIt-Anchor" href="#25-max-返回集合的最大值"></a> 2.5 MAX() - 返回集合的最大值</h2><p><strong>参考</strong>：<a href="https://blog.51cto.com/u_15127597/3800261" target="_blank" rel="noopener">SQLAlchemy（二)：SQLAlchemy对数据的增删改查操作、属性常用数据类型详解</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">age_max = session.query(func.max(Person.age)).scalar()  <span class="comment"># 23</span></span><br></pre></td></tr></table></figure><h2 id="26-sum-返回所有值的总和"><a class="markdownIt-Anchor" href="#26-sum-返回所有值的总和"></a> 2.6 SUM() - 返回所有值的总和</h2><p><strong>参考</strong>：<a href="https://blog.csdn.net/weixin_43303732/article/details/86476069" target="_blank" rel="noopener">sqlalchemy对数据进行求和</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">age_sum = session.query(func.sum(Person.age)).scalar()  <span class="comment"># 112</span></span><br><span class="line">age_sum = session.query(func.sum(Person.age)).filter(Person.name.like(<span class="string">"to%"</span>)).scalar()  <span class="comment"># 18</span></span><br></pre></td></tr></table></figure><h1 id="x-参考"><a class="markdownIt-Anchor" href="#x-参考"></a> X 参考</h1><ul><li></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="开发" scheme="https://Dragonliu2018.github.io/categories/开发/"/>
    
    
    <category term="MySQL" scheme="https://Dragonliu2018.github.io/tags/MySQL/"/>
    
    <category term="python" scheme="https://Dragonliu2018.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>MySQL错误1366：字段编码报错</title>
    <link href="https://dragonliu2018.github.io/2022/03/26/MySQL%E9%94%99%E8%AF%AF1366%EF%BC%9A%E5%AD%97%E6%AE%B5%E7%BC%96%E7%A0%81%E6%8A%A5%E9%94%99/"/>
    <id>https://dragonliu2018.github.io/2022/03/26/MySQL%E9%94%99%E8%AF%AF1366%EF%BC%9A%E5%AD%97%E6%AE%B5%E7%BC%96%E7%A0%81%E6%8A%A5%E9%94%99/</id>
    <published>2022-03-26T03:32:44.000Z</published>
    <updated>2022-03-26T04:05:11.334Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-引入"><a class="markdownIt-Anchor" href="#1-引入"></a> 1 引入</h1><p>在做毕设时，操作mysql时出现了这样的一个报错：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlalchemy.exc.DataError: (pymysql.err.DataError) (1366, <span class="string">"Incorrect string value: '\\xF2\\x88\\xBF\\xB6E ...' for column 'property' at row 1"</span>)</span><br></pre></td></tr></table></figure><p><strong>原因</strong>：UTF-8编码有可能是两个、三个、四个字节。Emoji表情或者某些特殊字符是4个字节，而Mysql的utf8编码最多3个字节，所以数据插不进去。</p><h1 id="2-解决"><a class="markdownIt-Anchor" href="#2-解决"></a> 2 解决</h1><h2 id="21-问题复现"><a class="markdownIt-Anchor" href="#21-问题复现"></a> 2.1 问题复现</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> declarative_base</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker</span><br><span class="line"></span><br><span class="line">HOST = <span class="string">'127.0.0.1'</span></span><br><span class="line">PORT = <span class="number">3306</span></span><br><span class="line">USERNAME = <span class="string">'xxx'</span></span><br><span class="line">PASSWORD = <span class="string">'xxx'</span></span><br><span class="line">DB = <span class="string">'xxx'</span></span><br><span class="line"><span class="comment"># f代表可以使用&#123;&#125;引用变量</span></span><br><span class="line">DB_URI = <span class="string">f'mysql+pymysql://<span class="subst">&#123;USERNAME&#125;</span>:<span class="subst">&#123;PASSWORD&#125;</span>@<span class="subst">&#123;HOST&#125;</span>:<span class="subst">&#123;PORT&#125;</span>/<span class="subst">&#123;DB&#125;</span>'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建引擎</span></span><br><span class="line">engine = create_engine(DB_URI)</span><br><span class="line"><span class="comment"># 创建SQLORM基类，注意这里要加参数，参数为上一步创建的引擎</span></span><br><span class="line">Base = declarative_base(engine)</span><br><span class="line"><span class="comment"># 构建session对象</span></span><br><span class="line">session = sessionmaker(engine)()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建实体表Encode</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Encode</span><span class="params">(Base)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">"string_encode"</span></span><br><span class="line">    id = Column(Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    property = Column(TEXT)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将模型映射到数据库中</span></span><br><span class="line"><span class="comment"># 即如果数据库中没有student表则创建映射表student</span></span><br><span class="line">Base.metadata.create_all()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 增：一个</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(obj)</span>:</span></span><br><span class="line">    session.add(obj)  <span class="comment"># 添加到session</span></span><br><span class="line">    session.commit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除Encode表</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">del_table</span><span class="params">()</span>:</span></span><br><span class="line">    Encode.__table__.drop()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    property = <span class="string">"📦 🚀 森罗万象"</span></span><br><span class="line">    insert(Encode(property=property))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># del_table()</span></span><br></pre></td></tr></table></figure><p>出现报错：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sqlalchemy.exc.DataError: (pymysql.err.DataError) (1366, <span class="string">"Incorrect string value: '\\xF0\\x9F\\x93\\xA6 \\xF0...' for column 'property' at row 1"</span>)</span><br><span class="line">[SQL: INSERT INTO string_encode (property) VALUES (%(property)s)]</span><br><span class="line">[parameters: &#123;<span class="string">'property'</span>: <span class="string">'📦 🚀 森罗万象'</span>&#125;]</span><br><span class="line">(Background on this error at: https://sqlalche.me/e/14/9h9h)</span><br></pre></td></tr></table></figure><h2 id="22-尝试解决"><a class="markdownIt-Anchor" href="#22-尝试解决"></a> 2.2 尝试解决</h2><h3 id="221-sqlalchemy-设置表编码及引擎"><a class="markdownIt-Anchor" href="#221-sqlalchemy-设置表编码及引擎"></a> 2.2.1 Sqlalchemy 设置表编码及引擎</h3><p><strong>参考</strong>：<a href="https://blog.csdn.net/weixin_34015336/article/details/93760632" target="_blank" rel="noopener">Sqlalchemy 设置表编码及引擎</a></p><ol><li><p>设置引擎编码方式为utf8：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DB_URI = <span class="string">f'mysql+pymysql://<span class="subst">&#123;USERNAME&#125;</span>:<span class="subst">&#123;PASSWORD&#125;</span>@<span class="subst">&#123;HOST&#125;</span>:<span class="subst">&#123;PORT&#125;</span>/<span class="subst">&#123;DB&#125;</span>?charset=utf8'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认是utf8，所以上述代码无需修改</span></span><br><span class="line">DB_URI = <span class="string">f'mysql+pymysql://<span class="subst">&#123;USERNAME&#125;</span>:<span class="subst">&#123;PASSWORD&#125;</span>@<span class="subst">&#123;HOST&#125;</span>:<span class="subst">&#123;PORT&#125;</span>/<span class="subst">&#123;DB&#125;</span>'</span></span><br></pre></td></tr></table></figure></li><li><p>设置数据库表编码方式为utf8mb4：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Encode</span><span class="params">(Base)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">"string_encode"</span></span><br><span class="line">    id = Column(Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    property = Column(TEXT)</span><br><span class="line">    __table_args__ = &#123;</span><br><span class="line">        <span class="string">"mysql_charset"</span>: <span class="string">"utf8mb4"</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>删除原来的表，再次生成表结构就可以正常插入了：</p><img src="https://s2.loli.net/2022/03/26/TlzLxG3yScio7EY.png" width="800" height="200" alt="图片名称" align="center" id="119"></li></ol><p><strong>缺点</strong>：需要重新构建表，所以旧表存在大量数据就会比较麻烦；在这种情况下可以使用下面的方法。</p><h3 id="222-修改表的字符集为utf8mb4"><a class="markdownIt-Anchor" href="#222-修改表的字符集为utf8mb4"></a> 2.2.2 修改表的字符集为utf8mb4</h3><p><strong>参考</strong>：<a href="https://blog.csdn.net/qlzy_5418/article/details/91973353" target="_blank" rel="noopener">mysql之（1366，“Incorrect string value:’\xF0\x9F\x98\x82…’ for column ‘content’ at row 1”)20</a></p><ol><li><p>navicat右击需要修改的数据表，点击设计表；</p></li><li><p>选择要修改的字段<code>property</code>，将字符集修改为<code>utf8mb4</code>，然后保存：</p><img src="https://s2.loli.net/2022/03/26/Ne1f5wn8GOLZqxt.png" width="800" height="300" alt="图片名称" align="center" id="120"></li><li><p>现在就可以正常插入了：</p><img src="https://s2.loli.net/2022/03/26/8pfV65gsinLQFMS.png" width="800" height="300" alt="图片名称" align="center" id="121"></li></ol><p><strong>缺点</strong>：这种方法仅仅改变了当前表的字符集，如果以后项目迁移，重新生成表的情况，相同的问题将会再次出现。</p><h1 id="x-参考"><a class="markdownIt-Anchor" href="#x-参考"></a> X 参考</h1><ul><li><a href="https://blog.csdn.net/zz975896590/article/details/119991096" target="_blank" rel="noopener">Mysql错误1366的解决办法：Incorrect string value: ‘\xF0\x9F…’ for column ‘XXX’ at row 1</a></li><li><a href="https://blog.csdn.net/wenxingchen/article/details/118021258" target="_blank" rel="noopener">pymysql.err.DataError: (1366, “Incorrect string value: ‘\xF0\x9F\x92\xA1 \xE4…‘ for column ‘d</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="开发" scheme="https://Dragonliu2018.github.io/categories/开发/"/>
    
    
    <category term="MySQL" scheme="https://Dragonliu2018.github.io/tags/MySQL/"/>
    
    <category term="python" scheme="https://Dragonliu2018.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>MySQL错误1406：超长字符串</title>
    <link href="https://dragonliu2018.github.io/2022/03/25/MySQL%E9%94%99%E8%AF%AF1406%EF%BC%9A%E8%B6%85%E9%95%BF%E5%AD%97%E7%AC%A6%E4%B8%B2/"/>
    <id>https://dragonliu2018.github.io/2022/03/25/MySQL%E9%94%99%E8%AF%AF1406%EF%BC%9A%E8%B6%85%E9%95%BF%E5%AD%97%E7%AC%A6%E4%B8%B2/</id>
    <published>2022-03-25T15:52:12.000Z</published>
    <updated>2022-03-26T04:04:34.463Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-引入"><a class="markdownIt-Anchor" href="#1-引入"></a> 1 引入</h1><p>在做毕设时，操作mysql时出现了这样的一个报错：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlalchemy.exc.DataError: (pymysql.err.DataError) (1406, <span class="string">"Data too long for column 'actions' at row 1"</span>)</span><br></pre></td></tr></table></figure><p>这里显示字段的长度不够存放数据，也就是解决mysql超长字符串存储问题。</p><h1 id="2-解决"><a class="markdownIt-Anchor" href="#2-解决"></a> 2 解决</h1><h2 id="21-问题复现"><a class="markdownIt-Anchor" href="#21-问题复现"></a> 2.1 问题复现</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> declarative_base</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker</span><br><span class="line"></span><br><span class="line">HOST = <span class="string">'127.0.0.1'</span></span><br><span class="line">PORT = <span class="number">3306</span></span><br><span class="line">USERNAME = <span class="string">'xxx'</span></span><br><span class="line">PASSWORD = <span class="string">'xxx'</span></span><br><span class="line">DB = <span class="string">'xxx'</span></span><br><span class="line"><span class="comment"># f代表可以使用&#123;&#125;引用变量</span></span><br><span class="line">DB_URI = <span class="string">f'mysql+pymysql://<span class="subst">&#123;USERNAME&#125;</span>:<span class="subst">&#123;PASSWORD&#125;</span>@<span class="subst">&#123;HOST&#125;</span>:<span class="subst">&#123;PORT&#125;</span>/<span class="subst">&#123;DB&#125;</span>'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建引擎</span></span><br><span class="line">engine = create_engine(DB_URI)</span><br><span class="line"><span class="comment"># 创建SQLORM基类，注意这里要加参数，参数为上一步创建的引擎</span></span><br><span class="line">Base = declarative_base(engine)</span><br><span class="line"><span class="comment"># 构建session对象</span></span><br><span class="line">session = sessionmaker(engine)()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建实体表Length</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Length</span><span class="params">(Base)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">"string_length"</span></span><br><span class="line">    id = Column(Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    actions = Column(String(<span class="number">10</span>))  <span class="comment"># 修改此处debug</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将模型映射到数据库中</span></span><br><span class="line"><span class="comment"># 即如果数据库中没有student表则创建映射表student</span></span><br><span class="line">Base.metadata.create_all()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 增：一个</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">insert</span><span class="params">(obj)</span>:</span></span><br><span class="line">    session.add(obj)  <span class="comment"># 添加到session</span></span><br><span class="line">    session.commit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除Data表</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">del_table</span><span class="params">()</span>:</span></span><br><span class="line">    Length.__table__.drop()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    actions = <span class="string">''</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):  <span class="comment"># 修改长度进行测试</span></span><br><span class="line">        actions += <span class="string">"SY"</span></span><br><span class="line">    insert(Length(actions=actions))</span><br><span class="line">    del_table()</span><br></pre></td></tr></table></figure><p>出现报错：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sqlalchemy.exc.DataError: (pymysql.err.DataError) (1406, <span class="string">"Data too long for column 'actions' at row 1"</span>)</span><br><span class="line">[SQL: INSERT INTO string_length (actions) VALUES (%(actions)s)]</span><br><span class="line">[parameters: &#123;<span class="string">'actions'</span>: <span class="string">'SYSYSYSYSYSYSYSYSYSY'</span>&#125;]</span><br><span class="line">(Background on this error at: https://sqlalche.me/e/14/9h9h)</span><br></pre></td></tr></table></figure><h2 id="22-尝试解决"><a class="markdownIt-Anchor" href="#22-尝试解决"></a> 2.2 尝试解决</h2><ol><li><p>修改String的长度参数，可以解决：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">actions = Column(String(<span class="number">21842</span>))</span><br></pre></td></tr></table></figure><p><strong>注意</strong>：VARCHAR(0-65535 bytes)，这里测试String的长度参数最大是<code>21842</code>，具体意思与大小还不清楚。</p></li><li><p>修改长度后就发生了之前的报错：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">actions = <span class="string">''</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">21842</span>):</span><br><span class="line">    actions += <span class="string">"SY"</span></span><br><span class="line">insert(Length(actions=actions))</span><br></pre></td></tr></table></figure><p>修改字段类型为<code>TEXT</code>可以解决上述问题：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">actions = Column(TEXT)  <span class="comment"># 64K TEXT</span></span><br><span class="line">actions = Column(Text(<span class="number">65536</span>))  <span class="comment"># 16M MEDIUMTEXT</span></span><br><span class="line">actions = Column(Text(<span class="number">16777216</span>))  <span class="comment"># 32M LONGTEXT</span></span><br></pre></td></tr></table></figure><p>现在字符串最大长度可以到32M，可以cover大部分情况。</p></li></ol><h1 id="x-参考"><a class="markdownIt-Anchor" href="#x-参考"></a> X 参考</h1><ul><li><a href="https://blog.csdn.net/Darkman_EX/article/details/85211597" target="_blank" rel="noopener">mysql报错：“DataError: (pymysql.err.DataError) (1406, &quot;Data too long for column ‘pwd’ at row 1”</a></li><li><a href="https://blog.csdn.net/qq_41251963/article/details/86659549" target="_blank" rel="noopener">pymysql.err.DataError: (1406, “Data too long for column ‘字段名’ at row 1”)</a></li><li><a href="https://blog.csdn.net/qq392039757/article/details/83617260" target="_blank" rel="noopener">pymysql.err.DataError: (1406, “Data too long for column ‘url’ at row 1”)</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="开发" scheme="https://Dragonliu2018.github.io/categories/开发/"/>
    
    
    <category term="MySQL" scheme="https://Dragonliu2018.github.io/tags/MySQL/"/>
    
    <category term="python" scheme="https://Dragonliu2018.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>MySQL数据类型以及sqlalchemy中的对应</title>
    <link href="https://dragonliu2018.github.io/2022/03/25/MySQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BB%A5%E5%8F%8Asqlalchemy%E4%B8%AD%E7%9A%84%E5%AF%B9%E5%BA%94/"/>
    <id>https://dragonliu2018.github.io/2022/03/25/MySQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BB%A5%E5%8F%8Asqlalchemy%E4%B8%AD%E7%9A%84%E5%AF%B9%E5%BA%94/</id>
    <published>2022-03-25T13:17:46.000Z</published>
    <updated>2022-03-25T16:28:09.971Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-mysql数据类型"><a class="markdownIt-Anchor" href="#1-mysql数据类型"></a> 1 MySQL数据类型</h1><ul><li><strong>参考</strong>：<a href="https://www.runoob.com/mysql/mysql-data-types.html" target="_blank" rel="noopener">MySQL 数据类型</a></li></ul><p>MySQL 支持多种类型，大致可以分为三类：数值、日期/时间和字符串(字符)类型。</p><h2 id="11-数值类型"><a class="markdownIt-Anchor" href="#11-数值类型"></a> 1.1 数值类型</h2><table><thead><tr><th style="text-align:center">类型</th><th style="text-align:center">大小</th><th style="text-align:center">范围（有符号）</th><th style="text-align:center">范围（无符号）</th><th style="text-align:center">用途</th></tr></thead><tbody><tr><td style="text-align:center">TINYINT</td><td style="text-align:center">1 Bytes</td><td style="text-align:center">(-128，127)</td><td style="text-align:center">(0，255)</td><td style="text-align:center">小整数值</td></tr><tr><td style="text-align:center">SMALLINT</td><td style="text-align:center">2 Bytes</td><td style="text-align:center">(-32768，32767)</td><td style="text-align:center">(0，65 535)</td><td style="text-align:center">大整数值</td></tr><tr><td style="text-align:center">MEDIUMINT</td><td style="text-align:center">3 Bytes</td><td style="text-align:center">(-8388608，8388607)</td><td style="text-align:center">(0，16 777 215)</td><td style="text-align:center">大整数值</td></tr><tr><td style="text-align:center">INT或INTEGER</td><td style="text-align:center">4 Bytes</td><td style="text-align:center">(-2 147 483 648，2 147 483 647)</td><td style="text-align:center">(0，4 294 967 295)</td><td style="text-align:center">大整数值</td></tr><tr><td style="text-align:center">BIGINT</td><td style="text-align:center">8 Bytes</td><td style="text-align:center">(-9,223,372,036,854,775,808，9 223 372 036 854 775 807)</td><td style="text-align:center">(0，18 446 744 073 709 551 615)</td><td style="text-align:center">极大整数值</td></tr><tr><td style="text-align:center">FLOAT</td><td style="text-align:center">4 Bytes</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">单精度浮点数值</td></tr><tr><td style="text-align:center">DOUBLE</td><td style="text-align:center">8 Bytes</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">双精度浮点数值</td></tr><tr><td style="text-align:center">DECIMAL或DEC</td><td style="text-align:center">对DECIMAL(M,D) ，如果M&gt;D，为M+2否则为D+2</td><td style="text-align:center">依赖于M和D的值</td><td style="text-align:center">依赖于M和D的值</td><td style="text-align:center">小数值</td></tr></tbody></table><h2 id="12-日期和时间类型"><a class="markdownIt-Anchor" href="#12-日期和时间类型"></a> 1.2 日期和时间类型</h2><p>每个时间类型有一个有效值范围和一个&quot;零&quot;值，当指定不合法的MySQL不能表示的值时使用&quot;零&quot;值。</p><table><thead><tr><th style="text-align:center">类型</th><th style="text-align:center">大小 ( bytes)</th><th style="text-align:center">范围</th><th style="text-align:center">格式</th><th style="text-align:center">用途</th></tr></thead><tbody><tr><td style="text-align:center">DATE</td><td style="text-align:center">3</td><td style="text-align:center">1000-01-01/9999-12-31</td><td style="text-align:center">YYYY-MM-DD</td><td style="text-align:center">日期值</td></tr><tr><td style="text-align:center">TIME</td><td style="text-align:center">3</td><td style="text-align:center">‘-838:59:59’/‘838:59:59’</td><td style="text-align:center">HH:MM:SS</td><td style="text-align:center">时间值或持续时间</td></tr><tr><td style="text-align:center">YEAR</td><td style="text-align:center">1</td><td style="text-align:center">1901/2155</td><td style="text-align:center">YYYY</td><td style="text-align:center">年份值</td></tr><tr><td style="text-align:center">DATETIME</td><td style="text-align:center">8</td><td style="text-align:center">1000-01-01 00:00:00/9999-12-31 23:59:59</td><td style="text-align:center">YYYY-MM-DD HH:MM:SS</td><td style="text-align:center">混合日期和时间值</td></tr><tr><td style="text-align:center">TIMESTAMP</td><td style="text-align:center">4</td><td style="text-align:center">1970-01-01 00:00:00/2038结束时间是第 <strong>2147483647</strong> 秒，北京时间 <strong>2038-1-19 11:14:07</strong>，格林尼治时间 2038年1月19日 凌晨 03:14:07</td><td style="text-align:center">YYYYMMDD HHMMSS</td><td style="text-align:center">混合日期和时间值，时间戳</td></tr></tbody></table><h2 id="13-字符串类型"><a class="markdownIt-Anchor" href="#13-字符串类型"></a> 1.3 字符串类型</h2><table><thead><tr><th style="text-align:center">类型</th><th style="text-align:center">大小</th><th style="text-align:center">用途</th></tr></thead><tbody><tr><td style="text-align:center">CHAR</td><td style="text-align:center">0-255 bytes</td><td style="text-align:center">定长字符串</td></tr><tr><td style="text-align:center">VARCHAR</td><td style="text-align:center">0-65535 bytes</td><td style="text-align:center">变长字符串</td></tr><tr><td style="text-align:center">TINYBLOB</td><td style="text-align:center">0-255 bytes</td><td style="text-align:center">不超过 255 个字符的二进制字符串</td></tr><tr><td style="text-align:center">TINYTEXT</td><td style="text-align:center">0-255 bytes</td><td style="text-align:center">短文本字符串</td></tr><tr><td style="text-align:center">BLOB</td><td style="text-align:center">0-65 535 bytes</td><td style="text-align:center">二进制形式的长文本数据</td></tr><tr><td style="text-align:center">TEXT</td><td style="text-align:center">0-65 535 bytes</td><td style="text-align:center">长文本数据</td></tr><tr><td style="text-align:center">MEDIUMBLOB</td><td style="text-align:center">0-16 777 215 bytes</td><td style="text-align:center">二进制形式的中等长度文本数据</td></tr><tr><td style="text-align:center">MEDIUMTEXT</td><td style="text-align:center">0-16 777 215 bytes</td><td style="text-align:center">中等长度文本数据</td></tr><tr><td style="text-align:center">LONGBLOB</td><td style="text-align:center">0-4 294 967 295 bytes</td><td style="text-align:center">二进制形式的极大文本数据</td></tr><tr><td style="text-align:center">LONGTEXT</td><td style="text-align:center">0-4 294 967 295 bytes</td><td style="text-align:center">极大文本数据</td></tr></tbody></table><ul><li>char(n) 和 varchar(n) 中括号中 n 代表字符的个数，并不代表字节个数，比如 CHAR(30) 就可以存储 30 个字符。</li><li>CHAR 和 VARCHAR 类型类似，但它们保存和检索的方式不同。它们的最大长度和是否尾部空格被保留等方面也不同。在存储或检索过程中不进行大小写转换。</li><li>BINARY 和 VARBINARY 类似于 CHAR 和 VARCHAR，不同的是它们包含二进制字符串而不要非二进制字符串。也就是说，它们包含字节字符串而不是字符字符串。这说明它们没有字符集，并且排序和比较基于列值字节的数值值。</li><li>BLOB 是一个二进制大对象，可以容纳可变数量的数据。有 4 种 BLOB 类型：TINYBLOB、BLOB、MEDIUMBLOB 和 LONGBLOB。它们区别在于可容纳存储范围不同。</li><li>有 4 种 TEXT 类型：TINYTEXT、TEXT、MEDIUMTEXT 和 LONGTEXT。对应的这 4 种 BLOB 类型，可存储的最大长度不同，可根据实际情况选择。</li></ul><h1 id="2-mysql-sqlalchemy与python数据类型对应"><a class="markdownIt-Anchor" href="#2-mysql-sqlalchemy与python数据类型对应"></a> 2 MySQL、sqlalchemy与Python数据类型对应</h1><table><thead><tr><th style="text-align:center">Mysql类型</th><th style="text-align:center">sqlalchemy类型</th><th style="text-align:center">python类型</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">TINYINT(1B)</td><td style="text-align:center">Boolean</td><td style="text-align:center">bool</td><td style="text-align:center">布尔值</td></tr><tr><td style="text-align:center">SMALLINT(2B)</td><td style="text-align:center">SmallInteger</td><td style="text-align:center">int</td><td style="text-align:center">取值范围较小，一般为16位</td></tr><tr><td style="text-align:center">MEDIUMINT(3B)</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">INT或INTEGER(4B)</td><td style="text-align:center">Integer</td><td style="text-align:center">int</td><td style="text-align:center">普通整数，一般32位</td></tr><tr><td style="text-align:center">BIGINT(8B)</td><td style="text-align:center">BigInteger</td><td style="text-align:center">int/long</td><td style="text-align:center">不限精度的整数</td></tr><tr><td style="text-align:center">FLOAT(4B)</td><td style="text-align:center">Float</td><td style="text-align:center">float</td><td style="text-align:center">浮点数</td></tr><tr><td style="text-align:center">DOUBLE(8B)</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">DECIMAL或DEC</td><td style="text-align:center">Numeric</td><td style="text-align:center">decimal.Decimal</td><td style="text-align:center">定点数</td></tr><tr><td style="text-align:center">DATE(3B)</td><td style="text-align:center">Date</td><td style="text-align:center">datetime.date</td><td style="text-align:center">日期</td></tr><tr><td style="text-align:center">TIME(3B)</td><td style="text-align:center">Time</td><td style="text-align:center">date.time</td><td style="text-align:center">时间</td></tr><tr><td style="text-align:center">YEAR(1B)</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">DATETIME(8B)</td><td style="text-align:center">DateTime</td><td style="text-align:center">datetime.datetime</td><td style="text-align:center">日期和时间</td></tr><tr><td style="text-align:center">TIMESTAMP(4B)</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">CHAR</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">VARCHAR</td><td style="text-align:center">String</td><td style="text-align:center">str</td><td style="text-align:center">变长字符串，而且String后面需要长度参数，否则报错</td></tr><tr><td style="text-align:center">TINYBLOB</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">TINYTEXT</td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center">BLOB</td><td style="text-align:center">LargeBinary</td><td style="text-align:center">str</td><td style="text-align:center">二进制文件，64K=65535bytes</td></tr><tr><td style="text-align:center">TEXT</td><td style="text-align:center">Text</td><td style="text-align:center">str</td><td style="text-align:center">变长字符串，64K=65535bytes(255bytes)</td></tr><tr><td style="text-align:center">MEDIUMBLOB</td><td style="text-align:center">LargeBinary(65536)</td><td style="text-align:center">str</td><td style="text-align:center">二进制，16M=16777215bytes</td></tr><tr><td style="text-align:center">MEDIUMTEXT</td><td style="text-align:center">Text(65536)</td><td style="text-align:center">str</td><td style="text-align:center">变长字符串，16M=16777215bytes</td></tr><tr><td style="text-align:center">LONGBLOB</td><td style="text-align:center">LargeBinary(16777216)</td><td style="text-align:center">str</td><td style="text-align:center">二进制，32M=4294967295bytes</td></tr><tr><td style="text-align:center">LONGTEXT</td><td style="text-align:center">Text(16777216)</td><td style="text-align:center">str</td><td style="text-align:center">变长字符串，32M=4294967295bytes</td></tr><tr><td style="text-align:center">ENUM</td><td style="text-align:center">Enum</td><td style="text-align:center">str</td><td style="text-align:center">一组字符串</td></tr></tbody></table><h1 id="3-代码实战"><a class="markdownIt-Anchor" href="#3-代码实战"></a> 3 代码实战</h1><h2 id="31-建立mysql表"><a class="markdownIt-Anchor" href="#31-建立mysql表"></a> 3.1 建立MySQL表</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> declarative_base</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker</span><br><span class="line"></span><br><span class="line">HOST = <span class="string">'127.0.0.1'</span></span><br><span class="line">PORT = <span class="number">3306</span></span><br><span class="line">USERNAME = <span class="string">'xxx'</span>  <span class="comment"># mysql的用户名</span></span><br><span class="line">PASSWORD = <span class="string">'xxx'</span>  <span class="comment"># mysql的密码</span></span><br><span class="line">DB = <span class="string">'xxx'</span>  <span class="comment"># 数据库名称</span></span><br><span class="line"><span class="comment"># f代表可以使用&#123;&#125;引用变量</span></span><br><span class="line">DB_URI = <span class="string">f'mysql+pymysql://<span class="subst">&#123;USERNAME&#125;</span>:<span class="subst">&#123;PASSWORD&#125;</span>@<span class="subst">&#123;HOST&#125;</span>:<span class="subst">&#123;PORT&#125;</span>/<span class="subst">&#123;DB&#125;</span>'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建引擎</span></span><br><span class="line">engine = create_engine(DB_URI)</span><br><span class="line"><span class="comment"># 创建SQLORM基类，注意这里要加参数，参数为上一步创建的引擎</span></span><br><span class="line">Base = declarative_base(engine)</span><br><span class="line"><span class="comment"># 构建session对象</span></span><br><span class="line">session = sessionmaker(engine)()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建实体表Data</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Data</span><span class="params">(Base)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">"data_type"</span></span><br><span class="line">    id = Column(Integer, primary_key=<span class="literal">True</span>)</span><br><span class="line">    booleanData = Column(Boolean(<span class="number">0</span>))  <span class="comment"># TINYINT(1B)</span></span><br><span class="line">    smallInteger = Column(SmallInteger)  <span class="comment"># SMALLINT(2B)</span></span><br><span class="line">    integer = Column(Integer)  <span class="comment"># INT或INTEGER(4B)</span></span><br><span class="line">    bigInteger = Column(BigInteger)  <span class="comment"># BIGINT(8B)</span></span><br><span class="line">    floatData = Column(Float)  <span class="comment"># FLOAT(4B)</span></span><br><span class="line">    numericData = Column(Numeric)  <span class="comment"># DECIMAL或DEC</span></span><br><span class="line">    dateData = Column(Date)  <span class="comment"># DATE(3B)</span></span><br><span class="line">    timeData = Column(Time)  <span class="comment"># TIME(3B)</span></span><br><span class="line">    dateTime = Column(DateTime)  <span class="comment"># DATETIME(8B)</span></span><br><span class="line">    stringData = Column(String(<span class="number">250</span>))  <span class="comment"># VARCHAR</span></span><br><span class="line">    textData = Column(Text)</span><br><span class="line">    mediumText = Column(Text(<span class="number">65536</span>))</span><br><span class="line">    longText = Column(Text(<span class="number">16777216</span>))</span><br><span class="line">    largeBinary = Column(LargeBinary)</span><br><span class="line">    mediumBlob = Column(LargeBinary(<span class="number">65536</span>))</span><br><span class="line">    longBlob = Column(LargeBinary(<span class="number">16777216</span>))</span><br><span class="line">    enumData = Column(Enum(<span class="string">'father'</span>, <span class="string">'mother'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将模型映射到数据库中</span></span><br><span class="line"><span class="comment"># 即如果数据库中没有student表则创建映射表student</span></span><br><span class="line">Base.metadata.create_all()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除Data表</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">del_table</span><span class="params">()</span>:</span></span><br><span class="line">    Data.__table__.drop()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    print(<span class="string">"test data type"</span>)</span><br><span class="line">    <span class="comment"># del_table()</span></span><br></pre></td></tr></table></figure><h2 id="32-mysql表结构"><a class="markdownIt-Anchor" href="#32-mysql表结构"></a> 3.2 MySQL表结构</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; DESC data_type;</span><br><span class="line">+--------------+-------------------------+------+-----+---------+----------------+</span><br><span class="line">| Field        | Type                    | Null | Key | Default | Extra          |</span><br><span class="line">+--------------+-------------------------+------+-----+---------+----------------+</span><br><span class="line">| id           | int                     | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| booleanData  | tinyint(1)              | YES  |     | NULL    |                |</span><br><span class="line">| smallInteger | smallint                | YES  |     | NULL    |                |</span><br><span class="line">| <span class="built_in">integer</span>      | int                     | YES  |     | NULL    |                |</span><br><span class="line">| bigInteger   | bigint                  | YES  |     | NULL    |                |</span><br><span class="line">| floatData    | <span class="built_in">float</span>                   | YES  |     | NULL    |                |</span><br><span class="line">| numericData  | decimal(10,0)           | YES  |     | NULL    |                |</span><br><span class="line">| dateData     | date                    | YES  |     | NULL    |                |</span><br><span class="line">| timeData     | time                    | YES  |     | NULL    |                |</span><br><span class="line">| dateTime     | datetime                | YES  |     | NULL    |                |</span><br><span class="line">| stringData   | varchar(250)            | YES  |     | NULL    |                |</span><br><span class="line">| textData     | text                    | YES  |     | NULL    |                |</span><br><span class="line">| mediumText   | mediumtext              | YES  |     | NULL    |                |</span><br><span class="line">| longText     | longtext                | YES  |     | NULL    |                |</span><br><span class="line">| largeBinary  | blob                    | YES  |     | NULL    |                |</span><br><span class="line">| mediumBlob   | mediumblob              | YES  |     | NULL    |                |</span><br><span class="line">| longBlob     | longblob                | YES  |     | NULL    |                |</span><br><span class="line">| enumData     | enum(<span class="string">'father'</span>,<span class="string">'mother'</span>) | YES  |     | NULL    |                |</span><br><span class="line">+--------------+-------------------------+------+-----+---------+----------------+</span><br></pre></td></tr></table></figure><h1 id="x-参考"><a class="markdownIt-Anchor" href="#x-参考"></a> X 参考</h1><ul><li><a href="https://www.cnblogs.com/hzjdpawn/p/12893270.html" target="_blank" rel="noopener">Flask SQLAlchemy 数据类型和数据库的对应关系 </a></li><li></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="开发" scheme="https://Dragonliu2018.github.io/categories/开发/"/>
    
    
    <category term="MySQL" scheme="https://Dragonliu2018.github.io/tags/MySQL/"/>
    
    <category term="python" scheme="https://Dragonliu2018.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>修复TortoiseGit文件夹和文件状态图标不显示问题</title>
    <link href="https://dragonliu2018.github.io/2022/03/25/%E4%BF%AE%E5%A4%8DTortoiseGit%E6%96%87%E4%BB%B6%E5%A4%B9%E5%92%8C%E6%96%87%E4%BB%B6%E7%8A%B6%E6%80%81%E5%9B%BE%E6%A0%87%E4%B8%8D%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98/"/>
    <id>https://dragonliu2018.github.io/2022/03/25/%E4%BF%AE%E5%A4%8DTortoiseGit%E6%96%87%E4%BB%B6%E5%A4%B9%E5%92%8C%E6%96%87%E4%BB%B6%E7%8A%B6%E6%80%81%E5%9B%BE%E6%A0%87%E4%B8%8D%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98/</id>
    <published>2022-03-25T10:58:15.000Z</published>
    <updated>2022-03-25T11:11:40.257Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-引入"><a class="markdownIt-Anchor" href="#1-引入"></a> 1 引入</h1><p>今天打开git仓库项目，突然发现文件夹和文件状态图标不再显示。</p><h1 id="2-解决修改注册表overlay的值"><a class="markdownIt-Anchor" href="#2-解决修改注册表overlay的值"></a> 2 解决(修改注册表Overlay的值)</h1><p>参考：<a href="https://www.cnblogs.com/xiesong/p/5761352.html" target="_blank" rel="noopener">【随记】修复TortoiseGit文件夹和文件状态图标不显示问题</a></p><ol><li><p>按<code>Win+R</code>键打开运行对话框，输入 <code>regedit</code> ，打开注册表；</p></li><li><p>在注册表中找到 <code>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\ShellIconOverlayIdentifiers</code></p></li><li><p>修改tortoise相关的名称（如在名称前加一个空格前缀）使其置于开始位置：</p><img src="https://s2.loli.net/2022/03/25/fvyk7c52IzhD1HQ.png" width="900" height="400" alt="图片名称" align="center" id="117"></li><li><p>重启电脑，图标正常显示：</p><img src="https://s2.loli.net/2022/03/25/Ca8BDKsJQLfoqnY.png" width="900" height="300" alt="图片名称" align="center" id="118"></li></ol><h1 id="x-参考"><a class="markdownIt-Anchor" href="#x-参考"></a> X 参考</h1><ul><li><a href="https://blog.csdn.net/mcsbary/article/details/90665192" target="_blank" rel="noopener">TortoiseGit 显示文件状态图标</a></li><li><a href="https://blog.csdn.net/quantum7/article/details/84639445" target="_blank" rel="noopener">解决TortoiseGit文件夹和文件状态图标不显示问题</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="环境与工具" scheme="https://Dragonliu2018.github.io/categories/环境与工具/"/>
    
    
  </entry>
  
  <entry>
    <title>借助gitbook与Gitee Pages服务搭建静态网站</title>
    <link href="https://dragonliu2018.github.io/2022/03/25/%E5%80%9F%E5%8A%A9gitbook%E4%B8%8EGitee-Pages%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99/"/>
    <id>https://dragonliu2018.github.io/2022/03/25/%E5%80%9F%E5%8A%A9gitbook%E4%B8%8EGitee-Pages%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99/</id>
    <published>2022-03-25T09:03:12.000Z</published>
    <updated>2022-03-25T09:40:56.312Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-引入"><a class="markdownIt-Anchor" href="#1-引入"></a> 1 引入</h1><p>在做PA助教，需要将讲义重新部署下，静态网站。讲义仓库在Gitee，所以使用 <code>gitbook + Gitee Pages</code> 实现该需求。本文将以自己的<code>Algorithm</code>仓库进行演示：</p><h1 id="2-实现"><a class="markdownIt-Anchor" href="#2-实现"></a> 2 实现</h1><p>主要参考：<a href="https://zhuanlan.zhihu.com/p/34946169" target="_blank" rel="noopener">使用 Gitbook 打造你的电子书</a></p><h2 id="21-本地安装gitbook"><a class="markdownIt-Anchor" href="#21-本地安装gitbook"></a> 2.1 本地安装gitbook</h2><h3 id="211-安装gitbook"><a class="markdownIt-Anchor" href="#211-安装gitbook"></a> 2.1.1 安装gitbook</h3><p>环境要求：</p><ul><li>NodeJS（推荐使用v4.0.0及以上版本）</li><li>Windows，Linux，Unix 或 Mac OS X</li></ul><p>Windows下在cmd中输入：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gitbook-cli -g</span><br></pre></td></tr></table></figure><p>执行下面的命令，查看 GitBook 版本，以验证安装成功：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitbook -V</span><br></pre></td></tr></table></figure><h3 id="212-gitbook-项目结构"><a class="markdownIt-Anchor" href="#212-gitbook-项目结构"></a> 2.1.2 GitBook 项目结构</h3><p>GitBook使用简单的目录结构。在 SUMMARY （即 <a href="http://SUMMARY.md" target="_blank" rel="noopener">SUMMARY.md</a> 文件）中列出的所有 Markdown / Asciidoc 文件将被转换为 HTML。</p><p>一个基本的 GitBook 电子书结构通常如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── book.json</span><br><span class="line">├── README.md</span><br><span class="line">├── SUMMARY.md</span><br><span class="line">├── chapter-1/</span><br><span class="line">|   ├── README.md</span><br><span class="line">|   └── something.md</span><br><span class="line">└── chapter-2/</span><br><span class="line">    ├── README.md</span><br><span class="line">    └── something.md</span><br></pre></td></tr></table></figure><p>GitBook 特殊文件的功能：</p><table><thead><tr><th style="text-align:center">文件</th><th style="text-align:center">描述</th></tr></thead><tbody><tr><td style="text-align:center">book.json</td><td style="text-align:center">配置数据、包括插件配置(可选)</td></tr><tr><td style="text-align:center"><a href="http://README.md" target="_blank" rel="noopener">README.md</a></td><td style="text-align:center">电子书的前言或每个文件夹的简介(必选)</td></tr><tr><td style="text-align:center"><a href="http://SUMMARY.md" target="_blank" rel="noopener">SUMMARY.md</a></td><td style="text-align:center">电子书目录(可选)</td></tr><tr><td style="text-align:center"><a href="http://GLOSSARY.md" target="_blank" rel="noopener">GLOSSARY.md</a></td><td style="text-align:center">词汇/注释术语列表(可选)</td></tr></tbody></table><h3 id="213-创建bookjson与summarymd"><a class="markdownIt-Anchor" href="#213-创建bookjson与summarymd"></a> 2.1.3 <a href="http://xn--book-pj9fv59d.xn--jsonSUMMARY-hr8q.md" target="_blank" rel="noopener">创建book.json与SUMMARY.md</a></h3><ul><li>参考：<a href="https://www.jianshu.com/p/2160f1ba68a0" target="_blank" rel="noopener">Gitbook根据目录生成Summary.md</a></li></ul><p><code>book.json</code> 文件需要自己创建，<code>SUMMARY.md</code>文件可以使用插件(gitbook-plugin-summary)自动生成。</p><p>安装插件：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i gitbook-plugin-summary --save</span><br></pre></td></tr></table></figure><p>在<code>Algorithm</code>项目根目录创建 <code>book.json</code> 文件，并输入：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"plugins"</span>: [ </span><br><span class="line"><span class="string">"summary"</span></span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="214-目录顺序"><a class="markdownIt-Anchor" href="#214-目录顺序"></a> 2.1.4 目录顺序</h3><p>关于数字序号的顺序：<code>Ch10</code>、<code>Ch11</code>、<code>Ch1</code>、<code>Ch2</code>、<code>Ch3</code>、<code>Ch4</code>…</p><p>所以需要修改序号：<code>Ch1</code>、<code>Ch2</code>、<code>Ch3</code>、<code>Ch4</code>、…、<code>Ch10</code>、<code>Ch11</code></p><h3 id="215-数学公式"><a class="markdownIt-Anchor" href="#215-数学公式"></a> 2.1.5 数学公式</h3><p>使用<code>mathjax</code>，但是不支持行内公式，效果不好，后续再看怎么解决这一块。</p><p>参考：</p><ul><li><a href="https://zhuanlan.zhihu.com/p/132638228" target="_blank" rel="noopener">gitbook使用mathjax</a></li><li><a href="https://blog.csdn.net/qq_42898299/article/details/106779945" target="_blank" rel="noopener">gitbook采坑笔记（一：Mathjax）</a></li></ul><h3 id="216-构建与启动服务"><a class="markdownIt-Anchor" href="#216-构建与启动服务"></a> 2.1.6 构建与启动服务</h3><p>使用下面的命令，会在项目的目录下生成一个 <code>_book</code> 目录，里面的内容为静态站点的资源文件：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitbook build</span><br></pre></td></tr></table></figure><p>使用下列命令会运行一个 web 服务, 通过 <code>http://localhost:4000/</code> 可以预览书籍：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitbook serve</span><br></pre></td></tr></table></figure><p>至此，<code>Algorithm</code>仓库对应的静态网站已经部署成功。</p><h2 id="22-实现在线访问"><a class="markdownIt-Anchor" href="#22-实现在线访问"></a> 2.2 实现在线访问</h2><p>在Gitee上打开<code>Algorithm</code>仓库，点击<code>服务</code>标签，选择<code>Gitee Pages</code>图标。</p><p><strong>注意</strong>：Gitee Pages服务需要实名认证，审核需要数个工作日。</p><img src="https://s2.loli.net/2022/03/25/w3mcMnqHIf4dyUG.png" width="800" height="400" alt="图片名称" align="center" id="116"><p><strong>部署目录需要是<code>_book</code></strong></p><p>现在访问 <a href="http://dragon-liu.gitee.io/algorithm" target="_blank" rel="noopener">http://dragon-liu.gitee.io/algorithm</a> 即可。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="环境与工具" scheme="https://Dragonliu2018.github.io/categories/环境与工具/"/>
    
    
  </entry>
  
  <entry>
    <title>【恶意家族进化分析】勒索病毒WannaCry家族</title>
    <link href="https://dragonliu2018.github.io/2022/03/10/%E3%80%90%E6%81%B6%E6%84%8F%E5%AE%B6%E6%97%8F%E8%BF%9B%E5%8C%96%E5%88%86%E6%9E%90%E3%80%91%E5%8B%92%E7%B4%A2%E7%97%85%E6%AF%92WannaCry%E5%AE%B6%E6%97%8F/"/>
    <id>https://dragonliu2018.github.io/2022/03/10/%E3%80%90%E6%81%B6%E6%84%8F%E5%AE%B6%E6%97%8F%E8%BF%9B%E5%8C%96%E5%88%86%E6%9E%90%E3%80%91%E5%8B%92%E7%B4%A2%E7%97%85%E6%AF%92WannaCry%E5%AE%B6%E6%97%8F/</id>
    <published>2022-03-10T07:48:19.000Z</published>
    <updated>2022-03-10T12:42:11.004Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-简介"><a class="markdownIt-Anchor" href="#1-简介"></a> 1 简介</h1><p>WannaCry（又叫Wanna Decryptor），一种<strong>加密型勒索软件兼蠕虫病毒</strong>（Encrypting Ransomware Worm），大小3.3MB，由不法分子利用NSA（National Security Agency，美国国家安全局）泄露的危险漏洞“EternalBlue”（永恒之蓝）进行传播，为WanaCrypt0r 1.0的变种。</p><img src="https://s2.loli.net/2022/03/10/8HeVcJj9ELopBkn.png" width="600" height="400" alt="图片名称" align="center" id="106"><p>恶意软件数据集中的家族标签：<code>Trojan.Ransom.WannaCryptor.A</code>、<code>Trojan.Ransom.WannaCryptor.H</code></p><ul><li><a href>百度百科</a></li><li><a href="https://zh.wikipedia.org/wiki/WannaCry#cite_note-trendmicro-12" target="_blank" rel="noopener">维基百科</a></li></ul><h1 id="2-进化"><a class="markdownIt-Anchor" href="#2-进化"></a> 2 进化</h1><h2 id="21-wanacrypt0r-10"><a class="markdownIt-Anchor" href="#21-wanacrypt0r-10"></a> 2.1 WanaCrypt0r 1.0</h2><h2 id="22-wannacry"><a class="markdownIt-Anchor" href="#22-wannacry"></a> 2.2 WannaCry</h2><h2 id="23-wannasister"><a class="markdownIt-Anchor" href="#23-wannasister"></a> 2.3 WannaSister</h2><h1 id="3-进化图示"><a class="markdownIt-Anchor" href="#3-进化图示"></a> 3 进化图示</h1><img src="https://s2.loli.net/2022/03/10/takqNpIlwMs82VT.png" width="800" height="500" alt="图片名称" align="center" id="107"><table><thead><tr><th style="text-align:center">对比项</th><th style="text-align:center">WannaCry1.0版</th><th style="text-align:center">WannaCry2.0版</th></tr></thead><tbody><tr><td style="text-align:center">时间戳</td><td style="text-align:center">未修改（最早2017.3.27）</td><td style="text-align:center">被修改</td></tr><tr><td style="text-align:center">标题</td><td style="text-align:center">Wanna Decryptor 1.0</td><td style="text-align:center">Wana Decrypt0r 2.0</td></tr><tr><td style="text-align:center">c.wry(配置文件其中包含比特币钱包地址和下载TOR地址等)</td><td style="text-align:center">存在</td><td style="text-align:center">存在</td></tr><tr><td style="text-align:center">b.wry(!WannaCryptor!.bmp桌面图片)</td><td style="text-align:center">存在</td><td style="text-align:center">存在</td></tr><tr><td style="text-align:center">r.wry(!Please Read Me!.txt FAQ)</td><td style="text-align:center">存在</td><td style="text-align:center">存在</td></tr><tr><td style="text-align:center">f.wry(测试解压文件的路径)</td><td style="text-align:center">存在</td><td style="text-align:center">存在</td></tr><tr><td style="text-align:center">t.wry加密模块是一个DLL文件)</td><td style="text-align:center">存在</td><td style="text-align:center">存在</td></tr><tr><td style="text-align:center">u.wry(!WannaDecryptor!.exe可执行程序)</td><td style="text-align:center">存在</td><td style="text-align:center">存在</td></tr><tr><td style="text-align:center">m.wry(语言文件是RTF文件格式)</td><td style="text-align:center">存在（1种语言）</td><td style="text-align:center">存在（28种语言）</td></tr><tr><td style="text-align:center">s.wnry(释放内嵌TOR包TaskData)</td><td style="text-align:center">不存在</td><td style="text-align:center">存在</td></tr><tr><td style="text-align:center">m.vbs(脚本文件创建快捷方式)</td><td style="text-align:center">不存在</td><td style="text-align:center">存在</td></tr><tr><td style="text-align:center">00000000.res</td><td style="text-align:center">存在</td><td style="text-align:center">存在</td></tr><tr><td style="text-align:center">00000000.pky为RSA子公钥</td><td style="text-align:center">存在</td><td style="text-align:center">存在</td></tr><tr><td style="text-align:center">00000000.eky是RSA子私钥使用RSA主公钥加密后的文件</td><td style="text-align:center">存在</td><td style="text-align:center">存在</td></tr><tr><td style="text-align:center">taskdl.exe删除移动到TMP目录的文件</td><td style="text-align:center">不存在</td><td style="text-align:center">存在</td></tr><tr><td style="text-align:center">taskse.exe使远程会话可以看到勒索窗体</td><td style="text-align:center">不存在</td><td style="text-align:center">存在</td></tr><tr><td style="text-align:center">资源解压密码</td><td style="text-align:center">wcry@123、wcry@2016</td><td style="text-align:center">WNcry@2ol7</td></tr></tbody></table><h1 id="x-参考"><a class="markdownIt-Anchor" href="#x-参考"></a> X 参考</h1><ul><li><a href="https://www.sohu.com/a/140989865_114837" target="_blank" rel="noopener">https://www.sohu.com/a/140989865_114837</a></li><li><a href="https://www.qq.com/a/20170614/057733.htm" target="_blank" rel="noopener">https://www.qq.com/a/20170614/057733.htm</a></li><li><a href="https://www.chinanews.com.cn/m/sh/2017/05-16/8225594.shtml" target="_blank" rel="noopener">https://www.chinanews.com.cn/m/sh/2017/05-16/8225594.shtml</a></li><li><a href="https://www.antiy.com/response/wannacry.html" target="_blank" rel="noopener">https://www.antiy.com/response/wannacry.html</a></li><li></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="安全" scheme="https://Dragonliu2018.github.io/categories/安全/"/>
    
    
  </entry>
  
  <entry>
    <title>《围城》书籍</title>
    <link href="https://dragonliu2018.github.io/2022/03/10/%E3%80%8A%E5%9B%B4%E5%9F%8E%E3%80%8B%E4%B9%A6%E7%B1%8D/"/>
    <id>https://dragonliu2018.github.io/2022/03/10/%E3%80%8A%E5%9B%B4%E5%9F%8E%E3%80%8B%E4%B9%A6%E7%B1%8D/</id>
    <published>2022-03-10T02:10:34.000Z</published>
    <updated>2022-03-10T04:48:51.473Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-简介"><a class="markdownIt-Anchor" href="#1-简介"></a> 1 简介</h1><p>《围城》是一幅栩栩如生的世井百态图，人生的酸甜苦辣千般滋味均在其中得到了淋漓尽致的体现。钱钟书先生将自己的语言天才并入极其渊博的知识，再添加上一些讽刺主义的幽默调料，以一书而定江山。《围城》显示给我们一个真正的聪明人是怎样看人生，又怎样用所有作家都必得使用的文字来表述自己的“观”和“感”的。</p><h1 id="2-作者"><a class="markdownIt-Anchor" href="#2-作者"></a> 2 作者</h1><p>钱锺书（1910年11月21日－1998年12月19日），原名仰先，字哲良，后改名锺书，字默存，号槐聚，曾用笔名中书君，男，江苏无锡人，中国作家、文学研究家。晓畅多种外文，包括英、法、德语，亦懂拉丁文、意大利文、西班牙文等。台湾作家、诗人兼讲座教授余光中分析当代中文时，常称道钱西学列于中国人之第一流，两岸三地之作家如陶杰、宋淇，行文之时，亦多交许赞之。</p><ul><li><a href="https://baike.baidu.com/item/%E9%92%B1%E9%94%BA%E4%B9%A6/139034#4_3" target="_blank" rel="noopener">百度百科</a></li><li><a href="https://zh.wikipedia.org/wiki/%E9%8C%A2%E9%8D%BE%E6%9B%B8" target="_blank" rel="noopener">维基百科</a></li></ul><h1 id="3-摘抄"><a class="markdownIt-Anchor" href="#3-摘抄"></a> 3 摘抄</h1><p>xxx</p><h1 id="4-自评"><a class="markdownIt-Anchor" href="#4-自评"></a> 4 自评</h1><p>昨晚读到46%(方鸿渐去往三闾大学的途中)，实在读不下去了，遂罢；等年龄大些，成熟些，再来续读。</p><p>文章开始男主方鸿渐就与周淑英（父亲自作主张订婚）、鲍小姐（露水情缘）、苏小姐（苏小姐妥协的结果）、唐小姐（貌似是白月光）产生爱情关系。一方面不太欣赏这样快餐式的爱情，另一方面自己还是对美好爱情具有种种憧憬。</p><p>豆瓣一用户的<a href="https://m.douban.com/book/comment/702501983?dt_platform=com.douban.activity.qq_session&amp;dt_dapp=1" target="_blank" rel="noopener">评论</a>：</p><blockquote><p>时隔多年重读，钟书先生的幽默、老辣、聪明、刻薄仍让人拍案激赏。无论是方鸿渐，还是孙柔嘉，抑或苏文纨，他们的寻常人生，不过就像苏小姐的爱情，起初因为“看得太名贵了，不肯随便施与”，及至遭遇现实的损耗，就只能迅速缴械、自怅自悔了，如此过了十几年，恐怕也只能借年轻人的生气来温暖自己的衰朽。深于一切语言、一切啼笑，“围城”内外，饱含对人生的讽刺和感伤。</p></blockquote><p>微信短视频上南师郦波教授的一段话：</p><blockquote><p>我突然想起方文山老师那首著名的”天青色等烟雨，而我在等你&quot;，这句话是有讲究的。天青色的那个釉很难烧，他要等，他一定要等到下雨的时候，才开火烧那个，他要那个温度和湿度刚好。你不知道什么时候天会下雨，你就在这等啊，等雨一来的时候你开始烧，刚好温度湿度都特别好的时候，那个最美的天青色就出来了。所以你不知道你的另一半会什么时候出现，你只能用你的生命去等，一定有一刻，你刚好在他刚好来，你们的天青色。</p></blockquote><p>台大教授欧丽娟在B站上的一段视频也蛮不错的：<a href="https://www.bilibili.com/video/BV1Jm4y1R7N9?spm_id_from=333.999.0.0" target="_blank" rel="noopener">视频链接</a></p><blockquote><p>我们现代人的自由恋爱 很好玩呐</p><p>有太多的形态是<strong>因为误会而结合 因为了解而分开</strong> 得之我姓 不得我命 所以啊 很多的恋爱失败就是因为发现彼此不适合</p><p>这么这么多的恋爱经验里面告诉我们说：<strong>你不应该改变你自己 可是你因为这场突如其来的一种迷穴 而让那个强大的爱情完全改变了自己</strong> 老实说 这恐怕就是灾难的开始 因为你已经变得不是你</p><p>真的 <strong>不要误以为你对一个人可以为所欲为 用来证明你们之间情感亲密</strong> 这真的是一个谬论 可是 这个谬论太普及 甚至呢 被当成是一个错误的爱情的版本 对于爱情的定义里面就是说 我爱你 因为世上有你 所以我爱你 你是因为有什么条件的 不是因为计算过的 正因为有你 所以我觉得这个世界很圆满 我觉得我的生命也很完整 爱情就是这么样的不讲道理 也因为他的不讲道理 使得这个爱情 不也有一种我们最喜欢的一种浪漫性质吗？<strong>我不是因为计算过了 才爱上你 而这样的爱呢 也不会因为有一个更好的人 你就被取代掉 这不就是真正的爱情吗？</strong></p><p>我很希望 这不要让你们的爱情破灭 因为你们都还蛮 20岁很浪漫哈 但是我总觉得浪漫 固然很美 可是脚踏实地 他才会茁壮 也才会伟大哈 他绝对不是一个美丽的幻想而已</p><p><strong>爱 并非存在于相互的凝视 而是 两个人一起望向 外在的同一方向</strong></p></blockquote><p>回头想想，大学四年马上结束，但是还没吃过二食堂的冒菜，也许下一个中午就去尝尝，也许还没来得及去就毕业了。</p><h1 id="5-他评"><a class="markdownIt-Anchor" href="#5-他评"></a> 5 他评</h1><p>xxx</p><h1 id="6-拓展"><a class="markdownIt-Anchor" href="#6-拓展"></a> 6 拓展</h1><p>xxx</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="阅读" scheme="https://Dragonliu2018.github.io/categories/阅读/"/>
    
    
    <category term="书评" scheme="https://Dragonliu2018.github.io/tags/书评/"/>
    
  </entry>
  
  <entry>
    <title>python解决循环引用问题</title>
    <link href="https://dragonliu2018.github.io/2022/03/09/python%E8%A7%A3%E5%86%B3%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8%E9%97%AE%E9%A2%98/"/>
    <id>https://dragonliu2018.github.io/2022/03/09/python%E8%A7%A3%E5%86%B3%E5%BE%AA%E7%8E%AF%E5%BC%95%E7%94%A8%E9%97%AE%E9%A2%98/</id>
    <published>2022-03-09T08:11:23.000Z</published>
    <updated>2022-03-09T12:17:30.843Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-引入"><a class="markdownIt-Anchor" href="#1-引入"></a> 1 引入</h1><p>当项目中的模块过多，或功能划分不够清晰时会出现循环引用的问题。最近在做毕设，涉及后台管理系统时出现循环引用的问题。</p><p>主要copy于：<a href="https://www.jianshu.com/p/a1e91cc53b07" target="_blank" rel="noopener">python解决循环引用问题</a></p><h1 id="2-示例"><a class="markdownIt-Anchor" href="#2-示例"></a> 2 示例</h1><p><code>moduleA.py</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> moduleB <span class="keyword">import</span> b</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">a</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'aaaaaaaa'</span>)</span><br><span class="line">    b()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">c</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'cccc'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    a()</span><br></pre></td></tr></table></figure><p><code>moduleB.py</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> moduleA <span class="keyword">import</span> c</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">b</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'bbbbbbbbbb'</span>)</span><br><span class="line">    c()</span><br></pre></td></tr></table></figure><p>运行<code>moduleA.py</code>出现以下报错：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ImportError: cannot import name <span class="string">'b'</span> from partially initialized module <span class="string">'moduleB'</span> (most likely due to a circular import)</span><br></pre></td></tr></table></figure><p>导入其实是要将 <code>被导入模块所有的代码都执行一遍，遇到函数和类的定义会作申明</code>。回到循环引用中，首先导入B，进入B中，发现B中又导入了A又回到A中，但是A又导入B这就形成了循环引用。</p><h1 id="3-解决"><a class="markdownIt-Anchor" href="#3-解决"></a> 3 解决</h1><h2 id="31-直接导入模块名通过模块调用其中的函数"><a class="markdownIt-Anchor" href="#31-直接导入模块名通过模块调用其中的函数"></a> 3.1 直接导入模块名，通过模块调用其中的函数</h2><p><code>moduleA.py</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> moduleB</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">a</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'aaaaaaaa'</span></span><br><span class="line">    moduleB.b()</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">c</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'cccccc'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    a()</span><br></pre></td></tr></table></figure><p><code>moduleB.py</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> moduleA</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">b</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'bbbbbbbbbb'</span></span><br><span class="line"></span><br><span class="line">    moduleA.c()</span><br></pre></td></tr></table></figure><h2 id="32-使用延迟导入lazy-import"><a class="markdownIt-Anchor" href="#32-使用延迟导入lazy-import"></a> 3.2 使用延迟导入(lazy import)</h2><p>在需要用的函数内部导入，或是在底部导入。</p><p><code>moduleA.py</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不变</span></span><br><span class="line"><span class="keyword">from</span> moduleB <span class="keyword">import</span> b</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">a</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'aaaaaaaa'</span>)</span><br><span class="line">    b()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">c</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'cccc'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    a()</span><br></pre></td></tr></table></figure><p><code>moduleB.py</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">b</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'bbbbbbbbbb'</span>)</span><br><span class="line">    c()</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> moduleA <span class="keyword">import</span> c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法2</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">b</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">from</span> moduleA <span class="keyword">import</span> c</span><br><span class="line">    print(<span class="string">'bbbbbbbbbb'</span>)</span><br><span class="line">    c()</span><br></pre></td></tr></table></figure><h2 id="33-重新设计代码结构将代码和并或者分离"><a class="markdownIt-Anchor" href="#33-重新设计代码结构将代码和并或者分离"></a> 3.3 重新设计代码结构，将代码和并或者分离</h2><p>将公共功能的代码分离成单独模块，或者将一些具有关系的代码合并成一个模块。</p><p>本次毕设便采用了这个方法：将一些公共功能的代码分离，<a href="http://config.py" target="_blank" rel="noopener">config.py</a>(数据库配置)、<a href="http://entity.py" target="_blank" rel="noopener">entity.py</a>(实体类)</p><p><code>config.py</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> declarative_base</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine, Column, Integer, String, TEXT</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker</span><br><span class="line"></span><br><span class="line">HOST = <span class="string">'127.0.0.1'</span></span><br><span class="line">PORT = <span class="number">3306</span></span><br><span class="line">USERNAME = <span class="string">'xxx'</span>  <span class="comment"># mysql数据库用户名</span></span><br><span class="line">PASSWORD = <span class="string">'xxx'</span>  <span class="comment"># 密码</span></span><br><span class="line">DB = <span class="string">'xxx'</span>  <span class="comment"># 数据库名称</span></span><br><span class="line"><span class="comment"># f代表可以使用&#123;&#125;引用变量</span></span><br><span class="line">DB_URI = <span class="string">f'mysql+pymysql://<span class="subst">&#123;USERNAME&#125;</span>:<span class="subst">&#123;PASSWORD&#125;</span>@<span class="subst">&#123;HOST&#125;</span>:<span class="subst">&#123;PORT&#125;</span>/<span class="subst">&#123;DB&#125;</span>'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建引擎</span></span><br><span class="line">engine = create_engine(DB_URI)</span><br><span class="line"><span class="comment"># 创建SQLORM基类，注意这里要加参数，参数为上一步创建的引擎</span></span><br><span class="line">Base = declarative_base(engine)</span><br><span class="line"><span class="comment"># 构建session对象</span></span><br><span class="line">session = sessionmaker(engine)()</span><br></pre></td></tr></table></figure><p><code>entity.py</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> config <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建Report表</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Report</span><span class="params">(Base)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">'report'</span>  <span class="comment"># 表名</span></span><br><span class="line">    id = Column(Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    report_name = Column(String(<span class="number">100</span>))</span><br><span class="line">    report_size = Column(String(<span class="number">100</span>))</span><br><span class="line">    source_info = Column(String(<span class="number">100</span>))</span><br><span class="line">    operation = Column(String(<span class="number">100</span>))</span><br><span class="line">    tag = Column(String(<span class="number">100</span>))</span><br><span class="line">    hazard_level = Column(String(<span class="number">100</span>))</span><br><span class="line">    malware_static_info = Column(TEXT())</span><br><span class="line">    malware_dynamic_info = Column(TEXT())</span><br><span class="line">    upload_time = Column(String(<span class="number">100</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建MidFid表</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MidFid</span><span class="params">(Base)</span>:</span></span><br><span class="line">    __tablename__ = <span class="string">'malware_mid_fid'</span>  <span class="comment"># 表名</span></span><br><span class="line">    id = Column(Integer, primary_key=<span class="literal">True</span>, autoincrement=<span class="literal">True</span>)</span><br><span class="line">    mid = Column(Integer())  <span class="comment"># 样本id</span></span><br><span class="line">    fid = Column(Integer())  <span class="comment"># 家族id</span></span><br></pre></td></tr></table></figure><h1 id="x-参考"><a class="markdownIt-Anchor" href="#x-参考"></a> X 参考</h1><ul><li></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="开发" scheme="https://Dragonliu2018.github.io/categories/开发/"/>
    
    
    <category term="python" scheme="https://Dragonliu2018.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>python列表操作之遍历</title>
    <link href="https://dragonliu2018.github.io/2022/03/08/python%E5%88%97%E8%A1%A8%E6%93%8D%E4%BD%9C%E4%B9%8B%E9%81%8D%E5%8E%86/"/>
    <id>https://dragonliu2018.github.io/2022/03/08/python%E5%88%97%E8%A1%A8%E6%93%8D%E4%BD%9C%E4%B9%8B%E9%81%8D%E5%8E%86/</id>
    <published>2022-03-08T07:03:09.000Z</published>
    <updated>2022-03-08T08:06:04.920Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-前言"><a class="markdownIt-Anchor" href="#1-前言"></a> 1 前言</h1><p>最近在使用python操作mysql，涉及列表操作比较多，整理一下列表遍历。</p><p>主要copy于<a href="https://blog.csdn.net/whatday/article/details/100557888" target="_blank" rel="noopener">python3 遍历列表list 四种方法</a></p><h1 id="2-方法"><a class="markdownIt-Anchor" href="#2-方法"></a> 2 方法</h1><h2 id="21-in"><a class="markdownIt-Anchor" href="#21-in"></a> 2.1 in</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">item_list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'a'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> item_list:</span><br><span class="line">    print(item_list.index(item), item)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">0 a</span></span><br><span class="line"><span class="string">1 b</span></span><br><span class="line"><span class="string">2 c</span></span><br><span class="line"><span class="string">3 d</span></span><br><span class="line"><span class="string">0 a</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure><p><strong>注意</strong>：按顺序输出值；如果列表中有重复值，下标会返回第一个值的下标，如上面的第二个<code>a</code>，但是这种bug只需要添加一个计数变量就解决了。</p><h2 id="22-enumerate"><a class="markdownIt-Anchor" href="#22-enumerate"></a> 2.2 enumerate()</h2><p><code>enumerate(sequence, [start=0])</code>，返回枚举对象(元组)</p><p>参数：</p><ul><li><code>sequence</code>：一个序列、迭代器或其他支持迭代对象。</li><li><code>start</code>：下标起始位置。</li></ul><p>用法实例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">item_list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'a'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> enumerate(item_list):</span><br><span class="line">    print(item)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">(0, 'a')</span></span><br><span class="line"><span class="string">(1, 'b')</span></span><br><span class="line"><span class="string">(2, 'c')</span></span><br><span class="line"><span class="string">(3, 'd')</span></span><br><span class="line"><span class="string">(4, 'a')</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> index, val <span class="keyword">in</span> enumerate(item_list):</span><br><span class="line">    print(index, val)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">0 a</span></span><br><span class="line"><span class="string">1 b</span></span><br><span class="line"><span class="string">2 c</span></span><br><span class="line"><span class="string">3 d</span></span><br><span class="line"><span class="string">4 a</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure><p><strong>注意</strong>：按顺序输出值；下标会返回对应值的下标，解决了<code>2.1</code>的问题。</p><h2 id="23-iter迭代器"><a class="markdownIt-Anchor" href="#23-iter迭代器"></a> 2.3 iter()迭代器</h2><p><code>iter(object, [sentinel])</code>函数用来生成迭代器，返回迭代对象。</p><p>参数：</p><ul><li><code>object</code>：支持迭代的集合对象。</li><li><code>sentinel</code>：如果传递了第二个参数，则参数 object 必须是一个可调用的对象（如，函数），此时，iter 创建了一个迭代器对象，每次调用这个迭代器对象的__next__()方法时，都会调用 object。</li></ul><p>用法实例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">item_list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'a'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> iter(item_list):</span><br><span class="line">    print(item)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string">b</span></span><br><span class="line"><span class="string">c</span></span><br><span class="line"><span class="string">d</span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure><p><strong>注意</strong>：按顺序输出。</p><h2 id="24-range函数"><a class="markdownIt-Anchor" href="#24-range函数"></a> 2.4 range()函数</h2><p><code>range(start, end, [step])</code> 函数返回类型是<code>ndarray</code>，可用<code>list()</code>返回一个整数列表，一般用在 <code>for</code> 循环中。</p><p>参数：</p><ul><li><code>start</code>：计数从 <code>start</code> 开始，默认是从 <code>0</code> 开始，例如<code>range(5)</code>等价于<code>range(0,5)</code>；</li><li><code>end</code>：计数到 <code>end</code> 结束，但不包括 <code>end</code>。例如：<code>range(0, 5)</code>是 <code>[0, 1, 2, 3, 4]</code> 没有 <code>5</code></li><li><code>step</code>：步长，默认为<code>1</code>。例如：<code>range(0, 5)</code> 等价于 <code>range(0, 5, 1)</code></li></ul><p>用法实例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">item_list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'a'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(item_list)):</span><br><span class="line">    print(item_list[i])</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string">b</span></span><br><span class="line"><span class="string">c</span></span><br><span class="line"><span class="string">d</span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure><p><strong>注意</strong>：按顺序输出。</p><h2 id="25-倒序遍历"><a class="markdownIt-Anchor" href="#25-倒序遍历"></a> 2.5 倒序遍历</h2><h3 id="251-reversed函数"><a class="markdownIt-Anchor" href="#251-reversed函数"></a> 2.5.1 reversed函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">item_list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'a'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> reversed(item_list):</span><br><span class="line">    print(item)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string">d</span></span><br><span class="line"><span class="string">c</span></span><br><span class="line"><span class="string">b</span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure><h3 id="252-range函数"><a class="markdownIt-Anchor" href="#252-range函数"></a> 2.5.2 range()函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">item_list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'a'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(item_list)<span class="number">-1</span>, <span class="number">-1</span>, <span class="number">-1</span>):</span><br><span class="line">    print(item_list[i])</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string">d</span></span><br><span class="line"><span class="string">c</span></span><br><span class="line"><span class="string">b</span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure><h3 id="253-切片"><a class="markdownIt-Anchor" href="#253-切片"></a> 2.5.3 切片</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">item_list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'a'</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> item_list[::<span class="number">-1</span>]:</span><br><span class="line">    print(item)</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string">d</span></span><br><span class="line"><span class="string">c</span></span><br><span class="line"><span class="string">b</span></span><br><span class="line"><span class="string">a</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure><h1 id="x-参考"><a class="markdownIt-Anchor" href="#x-参考"></a> X 参考</h1><ul><li><a href="https://www.cnblogs.com/pizitai/p/6398276.html" target="_blank" rel="noopener">Python 列表(List) 的三种遍历(序号和值)方法</a></li><li><a href="https://www.cnblogs.com/GumpYan/p/12334839.html" target="_blank" rel="noopener">python列表遍历（包括倒序遍历的三种方法）</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="开发" scheme="https://Dragonliu2018.github.io/categories/开发/"/>
    
    
    <category term="python" scheme="https://Dragonliu2018.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>python列表操作之排序</title>
    <link href="https://dragonliu2018.github.io/2022/03/08/python%E5%88%97%E8%A1%A8%E6%93%8D%E4%BD%9C%E4%B9%8B%E6%8E%92%E5%BA%8F/"/>
    <id>https://dragonliu2018.github.io/2022/03/08/python%E5%88%97%E8%A1%A8%E6%93%8D%E4%BD%9C%E4%B9%8B%E6%8E%92%E5%BA%8F/</id>
    <published>2022-03-08T07:02:59.000Z</published>
    <updated>2022-03-08T08:44:39.275Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-前言"><a class="markdownIt-Anchor" href="#1-前言"></a> 1 前言</h1><p>最近在使用python操作mysql，涉及列表操作比较多，整理一下列表排序。</p><p>主要copy于 <a href="https://www.runoob.com/python/att-list-sort.html" target="_blank" rel="noopener">菜鸟教程——Python List sort()方法</a></p><h1 id="2-sort方法"><a class="markdownIt-Anchor" href="#2-sort方法"></a> 2 sort()方法</h1><p><code>sort()</code> 函数用于对原列表进行排序，如果指定参数，则使用比较函数指定的比较函数。</p><p><code>sort()</code>方法语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list.sort(cmp=<span class="literal">None</span>, key=<span class="literal">None</span>, reverse=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><p><strong>参数</strong>：</p><ul><li><code>cmp</code> – 可选参数, 如果指定了该参数会使用该参数的方法进行排序。</li><li><code>key</code> – 主要是用来进行比较的元素，只有一个参数，具体的函数的参数就是取自于可迭代对象中，指定可迭代对象中的一个元素来进行排序。</li><li><code>reverse</code> – 排序规则，<strong>reverse = True</strong> 降序， <strong>reverse = False</strong> 升序（默认）。</li></ul><p><strong>返回值</strong>：</p><p>该方法没有返回值，但是会对列表的对象进行排序。</p><p>以下实例展示了 sort() 函数的使用方法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">item_list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'a'</span>]</span><br><span class="line"></span><br><span class="line">print(item_list)  <span class="comment"># ['a', 'b', 'c', 'd', 'a']</span></span><br><span class="line">item_list.sort()</span><br><span class="line">print(item_list)  <span class="comment"># ['a', 'a', 'b', 'c', 'd']</span></span><br></pre></td></tr></table></figure><p>关于<code>key</code>参数的使用：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取列表的第二个元素</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">takeSecond</span><span class="params">(elem)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> elem[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表</span></span><br><span class="line">random = [(<span class="number">2</span>, <span class="number">2</span>), (<span class="number">3</span>, <span class="number">4</span>), (<span class="number">4</span>, <span class="number">1</span>), (<span class="number">1</span>, <span class="number">3</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 指定第二个元素排序</span></span><br><span class="line">random.sort(key=takeSecond)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出类别</span></span><br><span class="line">print(random)  <span class="comment"># [(4, 1), (2, 2), (1, 3), (3, 4)]</span></span><br></pre></td></tr></table></figure><h1 id="x-参考"><a class="markdownIt-Anchor" href="#x-参考"></a> X 参考</h1><ul><li></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="开发" scheme="https://Dragonliu2018.github.io/categories/开发/"/>
    
    
    <category term="python" scheme="https://Dragonliu2018.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>python列表操作之去重</title>
    <link href="https://dragonliu2018.github.io/2022/03/06/python%E5%88%97%E8%A1%A8%E6%93%8D%E4%BD%9C%E4%B9%8B%E5%8E%BB%E9%87%8D/"/>
    <id>https://dragonliu2018.github.io/2022/03/06/python%E5%88%97%E8%A1%A8%E6%93%8D%E4%BD%9C%E4%B9%8B%E5%8E%BB%E9%87%8D/</id>
    <published>2022-03-06T12:37:31.000Z</published>
    <updated>2022-03-08T14:51:40.910Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="\assets\js\Meting.min.js"></script><h1 id="1-前言"><a class="markdownIt-Anchor" href="#1-前言"></a> 1 前言</h1><p>最近在使用python操作mysql，涉及列表操作比较多，整理一下列表去重。</p><p>主要copy于<a href="https://zhuanlan.zhihu.com/p/364610029" target="_blank" rel="noopener">Python 列表去重的4种方式及性能对比</a></p><h1 id="2-辅助数组"><a class="markdownIt-Anchor" href="#2-辅助数组"></a> 2 辅助数组</h1><p>新建一个数组，遍历原数组，如果值不在新数组里便加入到新数组中：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">item_list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'a'</span>]</span><br><span class="line"></span><br><span class="line">unique = []</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> item_list:</span><br><span class="line">    <span class="keyword">if</span> item <span class="keyword">not</span> <span class="keyword">in</span> unique:</span><br><span class="line">        unique.append(item)</span><br><span class="line"></span><br><span class="line">print(unique)  <span class="comment"># ['a', 'b', 'c', 'd']</span></span><br></pre></td></tr></table></figure><p>上面使用了数组作为存储对象，实际上如果我们改成集合存储去重后的结果，性能会快不少：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">item_list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'a'</span>]</span><br><span class="line"></span><br><span class="line">unique = set()</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> item_list:</span><br><span class="line">    <span class="keyword">if</span> item <span class="keyword">not</span> <span class="keyword">in</span> unique:</span><br><span class="line">        unique.add(item)</span><br><span class="line"></span><br><span class="line">print(unique)  <span class="comment"># &#123;'b', 'a', 'd', 'c'&#125;</span></span><br></pre></td></tr></table></figure><p>因为集合和数组的内在数据结构完全不同，集合使用了哈希表，因此速度会比列表快许多，但缺点在于无序。</p><h1 id="3-数组-集合-数组"><a class="markdownIt-Anchor" href="#3-数组-集合-数组"></a> 3 数组-&gt;集合-&gt;数组</h1><p>直接对数组进行集合转化，然后再转回数组：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">item_list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'a'</span>]</span><br><span class="line"></span><br><span class="line">unique = list(set(item_list))</span><br><span class="line"></span><br><span class="line">print(unique)  <span class="comment"># ['d', 'a', 'b', 'c']</span></span><br></pre></td></tr></table></figure><p><strong>注意</strong>：这种去重方式是最快的，但正如前面所说，集合是无序的，将数组转为集合后再转为列表，就失去了原有列表的顺序。</p><h1 id="4-保留原有数组顺序的去重dictfromkeys"><a class="markdownIt-Anchor" href="#4-保留原有数组顺序的去重dictfromkeys"></a> 4 保留原有数组顺序的去重（dict.fromkeys()）</h1><p>Python3.6+使用<code>dict.fromkeys()</code>函数，可以保留原有数组的顺序并去重：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">item_list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'a'</span>]</span><br><span class="line"></span><br><span class="line">unique = list(dict.fromkeys(item_list))</span><br><span class="line"></span><br><span class="line">print(unique)  <span class="comment"># ['a', 'b', 'c', 'd']</span></span><br></pre></td></tr></table></figure><p>当然，它会比单纯用集合进行去重的方式耗时稍微久一点；<code>dict.fromkeys()</code>仅在Python3.6及以上才支持。</p><hr><p>在Python3.6以下，其实也存在fromkeys函数，只不过它由collections提供：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> OrderedDict</span><br><span class="line"></span><br><span class="line">item_list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'a'</span>]</span><br><span class="line">unique = list(OrderedDict.fromkeys(item_list))</span><br><span class="line">print(unique)  <span class="comment"># ['a', 'b', 'c', 'd']</span></span><br></pre></td></tr></table></figure><p>比 Python3.6 的内置<code>dict.fromkeys()</code>慢一些，这是因为<code>OrderedDict</code>是用纯Python实现的。</p><h1 id="x-参考"><a class="markdownIt-Anchor" href="#x-参考"></a> X 参考</h1><ul><li></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="开发" scheme="https://Dragonliu2018.github.io/categories/开发/"/>
    
    
    <category term="python" scheme="https://Dragonliu2018.github.io/tags/python/"/>
    
  </entry>
  
</feed>
